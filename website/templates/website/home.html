{% extends 'website/base.html' %}
{% load static %}

{% block title %}Home - Fieldmax | Premium Tech at Unbeatable Prices{% endblock %}

{% block content %}
<style>
  /* ===== BASE STYLES WITH BETTER CONTRAST ===== */
  body {
    color: #f0f0f0; /* Much brighter text */
    background: #0a0e17;
    position: relative;
    z-index: 1;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  }

  * {
    color: inherit;
  }

  /* ===== ENHANCED BACKGROUNDS ===== */
  .video-background {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: -2;
    overflow: hidden;
  }
  
  .video-background video {
    width: 100%;
    height: 100%;
    object-fit: cover;
    opacity: 0.25; /* Increased opacity */
    filter: brightness(0.4) blur(1px); /* Reduced blur, increased brightness */
  }
  
  .gradient-bg {
    position: fixed;
    inset: 0;
    z-index: -3;
    background: linear-gradient(135deg, 
      rgba(102, 126, 234, 0.25) 0%, 
      rgba(118, 75, 162, 0.2) 25%, 
      rgba(240, 147, 251, 0.15) 50%, 
      rgba(79, 172, 254, 0.2) 75%, 
      rgba(0, 242, 254, 0.25) 100%);
    background-size: 400% 400%;
    animation: gradientShift 20s ease infinite;
  }

  /* Add overlay for better text readability */
  .content-overlay {
    position: relative;
    z-index: 1;
    background: linear-gradient(to bottom, 
      rgba(10, 14, 23, 0.8) 0%,
      rgba(10, 14, 23, 0.95) 50%,
      rgba(10, 14, 23, 0.98) 100%);
  }

  /* ===== IMPROVED TOP SEARCH ===== */
  .top-search-section {
    position: sticky;
    top: 0;
    z-index: 1000;
    padding: 15px 5%;
    background: rgba(10, 14, 23, 0.95);
    border-bottom: 1px solid rgba(102, 126, 234, 0.3);
    backdrop-filter: blur(10px);
  }

  .top-search-form {
    max-width: 800px;
    margin: 0 auto;
    display: flex;
    background: rgba(255, 255, 255, 0.15);
    border: 2px solid rgba(102, 126, 234, 0.5);
    border-radius: 50px;
    padding: 5px;
    transition: all 0.3s ease;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
  }

  .top-search-form:focus-within {
    border-color: #667eea;
    background: rgba(255, 255, 255, 0.2);
    box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
    transform: translateY(-2px);
  }

  .top-search-input {
    flex: 1;
    background: transparent;
    border: none;
    padding: 15px 20px;
    font-size: 16px;
    color: #ffffff;
    outline: none;
  }

  .top-search-input::placeholder {
    color: rgba(255, 255, 255, 0.7);
  }

  .top-search-btn {
    background: linear-gradient(135deg, #667eea, #764ba2);
    border: none;
    border-radius: 50px;
    padding: 15px 30px;
    color: white;
    font-weight: 700;
    font-size: 14px;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    gap: 8px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  .top-search-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 15px rgba(102, 126, 234, 0.4);
  }

  /* ===== ENHANCED HERO SECTION ===== */
  .hero {
    position: relative;
    min-height: 85vh;
    display: flex;
    align-items: center;
    padding: 60px 5% 80px;
    overflow: hidden;
  }
  
  .hero-content {
    max-width: 1400px;
    width: 100%;
    margin: 0 auto;
  }
  
  .hero-grid {
    display: grid;
    grid-template-columns: 1.2fr 1fr;
    gap: 60px;
    align-items: center;
  }
  
  .hero-badge {
    display: inline-flex;
    align-items: center;
    gap: 10px;
    background: linear-gradient(135deg, rgba(102, 126, 234, 0.2), rgba(0, 242, 254, 0.2));
    padding: 12px 25px;
    border-radius: 50px;
    font-size: 18px;
    font-weight: 700;
    margin-bottom: 25px;
    color: #00d5ff;
    border: 1px solid rgba(102, 126, 234, 0.3);
    animation: pulse 2s infinite;
  }
  
  @keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.8; }
  }
  
  .hero-text-slideshow {
    position: relative;
    height: 200px;
    overflow: hidden;
    margin-bottom: 25px;
  }
  
  .text-slide {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    opacity: 0;
    transition: opacity 0.8s ease;
  }
  
  .text-slide.active {
    opacity: 1;
  }
  
  .hero-title {
    font-size: clamp(2.5rem, 5vw, 4rem);
    font-weight: 900;
    line-height: 1.1;
    margin-bottom: 20px;
    color: #ffffff;
    text-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
  }
  
  .hero-title .highlight {
    background: linear-gradient(135deg, #667eea 0%, #02adfc 100%);
    -webkit-background-clip: text;
    background-clip: text; /* Added standard property */
    -webkit-text-fill-color: transparent;
    display: inline-block;
    position: relative;
  }
  
  .hero-title .highlight::after {
    content: '';
    position: absolute;
    bottom: -5px;
    left: 0;
    width: 100%;
    height: 3px;
    background: linear-gradient(135deg, #667eea, #02adfc);
    border-radius: 2px;
  }
  
  .hero-subtitle {
    font-size: 1.2rem;
    line-height: 1.7;
    color: rgba(255, 255, 255, 0.95);
    max-width: 550px;
    margin-bottom: 25px;
    text-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
  }
  
  .text-slideshow-nav {
    display: flex;
    gap: 10px;
    margin: 20px 0 30px;
  }
  
  .text-nav-dot {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.2);
    cursor: pointer;
    transition: all 0.3s ease;
    border: 2px solid transparent;
  }
  
  .text-nav-dot:hover {
    background: rgba(102, 126, 234, 0.5);
    transform: scale(1.2);
  }
  
  .text-nav-dot.active {
    background: #667eea;
    transform: scale(1.3);
    box-shadow: 0 0 10px rgba(102, 126, 234, 0.5);
  }
  
  .hero-buttons {
    display: flex;
    gap: 15px;
    flex-wrap: wrap;
  }
  
  .btn {
    display: inline-flex;
    align-items: center;
    gap: 10px;
    padding: 16px 32px;
    border-radius: 50px;
    font-weight: 700;
    font-size: 15px;
    text-decoration: none;
    transition: all 0.3s ease;
    border: 2px solid transparent;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }
  
  .btn-primary {
    background: linear-gradient(135deg, #667eea 0%, #02adfc 100%);
    color: white;
    box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
  }
  
  .btn-primary:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
  }
  
  .btn-secondary {
    background: rgba(255, 255, 255, 0.15);
    border: 2px solid rgba(255, 255, 255, 0.4);
    color: white;
    backdrop-filter: blur(10px);
  }
  
  .btn-secondary:hover {
    background: rgba(255, 255, 255, 0.25);
    transform: translateY(-3px);
    border-color: #667eea;
  }

  /* ===== IMPROVED IMAGE SLIDESHOW ===== */
  .hero-slideshow {
    position: relative;
    width: 100%;
    height: 450px;
    overflow: hidden;
    border-radius: 20px;
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
    border: 1px solid rgba(255, 255, 255, 0.1);
    background: rgba(0, 0, 0, 0.5);
  }
  
  .slideshow-container {
    position: relative;
    width: 100%;
    height: 100%;
  }
  
  .slide {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    opacity: 0;
    transition: opacity 1s ease;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 25px;
  }
  
  .slide.active {
    opacity: 1;
  }
  
  .slide-title {
    color: #ffffff;
    font-size: 1.4rem;
    font-weight: 800;
    text-align: center;
    margin-bottom: 20px;
    background: linear-gradient(135deg, rgba(102, 126, 234, 0.9), rgba(118, 75, 162, 0.9));
    padding: 12px 30px;
    border-radius: 50px;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
    text-transform: uppercase;
    letter-spacing: 1px;
  }
  
  .slide img {
    max-width: 80%;
    max-height: 70%;
    object-fit: contain;
    filter: drop-shadow(0 10px 20px rgba(0, 0, 0, 0.5));
    transition: transform 0.5s ease;
  }
  
  .slide.active img {
    animation: float 3s ease-in-out infinite;
  }
  
  @keyframes float {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-10px); }
  }
  
  .slideshow-nav {
    position: absolute;
    bottom: 25px;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    gap: 12px;
    z-index: 10;
  }
  
  .nav-dot {
    width: 14px;
    height: 14px;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.3);
    cursor: pointer;
    transition: all 0.3s ease;
    border: 2px solid transparent;
  }
  
  .nav-dot:hover {
    background: rgba(102, 126, 234, 0.7);
    transform: scale(1.2);
  }
  
  .nav-dot.active {
    background: #667eea;
    transform: scale(1.3);
    box-shadow: 0 0 15px rgba(102, 126, 234, 0.6);
  }
  
  .slideshow-arrow {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    background: rgba(0, 0, 0, 0.6);
    border: 2px solid rgba(255, 255, 255, 0.3);
    color: #ffffff;
    width: 50px;
    height: 50px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    font-size: 22px;
    transition: all 0.3s ease;
    z-index: 10;
    backdrop-filter: blur(5px);
  }
  
  .slideshow-arrow:hover {
    background: rgba(102, 126, 234, 0.8);
    border-color: #667eea;
    transform: translateY(-50%) scale(1.1);
  }
  
  .slideshow-arrow.prev { left: 20px; }
  .slideshow-arrow.next { right: 20px; }

  /* ===== ENHANCED MARQUEE ===== */
  .marquee-container {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    overflow: hidden;
    background: linear-gradient(135deg, 
      rgba(102, 126, 234, 0.2), 
      rgba(118, 75, 162, 0.2));
    padding: 15px 0;
    border-top: 1px solid rgba(255, 255, 255, 0.1);
  }
  
  .marquee {
    display: flex;
    animation: scroll 30s linear infinite;
  }
  
  .marquee-content {
    display: flex;
    align-items: center;
    gap: 40px;
    padding-right: 40px;
  }
  
  .marquee-item {
    display: flex;
    align-items: center;
    gap: 12px;
    font-size: 16px;
    font-weight: 700;
    color: #ffffff;
    text-transform: uppercase;
    letter-spacing: 1px;
    padding: 8px 20px;
    background: rgba(0, 0, 0, 0.3);
    border-radius: 50px;
    border: 1px solid rgba(255, 255, 255, 0.1);
  }

  /* ===== ENHANCED STATS SECTION ===== */
  .stats-section {
    padding: 60px 5%;
    background: linear-gradient(135deg, 
      rgba(10, 14, 23, 0.9), 
      rgba(20, 30, 48, 0.95));
    border-top: 1px solid rgba(102, 126, 234, 0.3);
    border-bottom: 1px solid rgba(102, 126, 234, 0.3);
  }
  
  .stats-grid {
    max-width: 1400px;
    margin: 0 auto;
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 25px;
  }
  
  .stat-card {
    background: rgba(255, 255, 255, 0.08);
    border: 1px solid rgba(102, 126, 234, 0.3);
    border-radius: 20px;
    padding: 30px 20px;
    text-align: center;
    transition: all 0.3s ease;
    backdrop-filter: blur(10px);
  }
  
  .stat-card:hover {
    transform: translateY(-8px);
    border-color: #667eea;
    background: rgba(255, 255, 255, 0.12);
    box-shadow: 0 15px 30px rgba(102, 126, 234, 0.2);
  }
  
  .stat-number {
    font-size: 3.5rem;
    font-weight: 900;
    background: linear-gradient(135deg, #667eea, #02adfc);
    -webkit-background-clip: text;
    background-clip: text; /* Added standard property */
    -webkit-text-fill-color: transparent;
    margin-bottom: 10px;
    display: block;
    text-shadow: 0 2px 10px rgba(102, 126, 234, 0.3);
  }
  
  .stat-label {
    font-size: 16px;
    font-weight: 700;
    color: rgba(255, 255, 255, 0.95);
    text-transform: uppercase;
    letter-spacing: 1px;
  }

  /* ===== IMPROVED BEST SELLING SECTION ===== */
  .best-selling-section {
    padding: 80px 5%;
    background: linear-gradient(135deg, 
      rgba(10,14,23,0.98) 0%, 
      rgba(20,30,48,0.97) 100%);
    position: relative;
    overflow: hidden;
  }

  .best-selling-section::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 1px;
    background: linear-gradient(90deg, 
      transparent, 
      rgba(102, 126, 234, 0.5), 
      transparent);
  }

  .section-header {
    text-align: center;
    margin-bottom: 60px;
    position: relative;
  }

  .section-title {
    font-size: 3.5rem;
    font-weight: 900;
    color: #ffffff;
    margin-bottom: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 20px;
    text-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
  }

  .title-icon {
    font-size: 3rem;
    animation: fire 1.5s ease-in-out infinite;
    color: #ff4500;
    filter: drop-shadow(0 0 10px rgba(255, 69, 0, 0.5));
  }

  @keyframes fire {
    0%,100% { transform: scale(1); }
    50% { transform: scale(1.2); }
  }

  .section-subtitle {
    font-size: 1.2rem;
    color: rgba(255,255,255,0.9);
    max-width: 600px;
    margin: 0 auto;
    line-height: 1.6;
  }

  /* Performance Cards */
  .performance-cards {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 25px;
    max-width: 800px;
    margin: 0 auto 50px;
  }

  .performance-card {
    background: rgba(255,255,255,0.1);
    border: 2px solid rgba(102,126,234,0.4);
    border-radius: 20px;
    padding: 30px;
    display: flex;
    align-items: center;
    gap: 20px;
    transition: all 0.3s ease;
    backdrop-filter: blur(10px);
  }

  .performance-card:hover {
    transform: translateY(-8px);
    border-color: #667eea;
    background: rgba(255,255,255,0.15);
    box-shadow: 0 15px 30px rgba(102,126,234,0.3);
  }

  .performance-icon {
    font-size: 3rem;
    min-width: 70px;
    filter: drop-shadow(0 2px 5px rgba(0,0,0,0.3));
  }

  .performance-value {
    font-size: 2.5rem;
    font-weight: 900;
    background: linear-gradient(135deg, #667eea, #02adfc);
    -webkit-background-clip: text;
    background-clip: text; /* Added standard property */
    -webkit-text-fill-color: transparent;
    margin-bottom: 5px;
    text-shadow: 0 2px 10px rgba(102,126,234,0.3);
  }

  .performance-label {
    font-size: 16px;
    color: rgba(255,255,255,0.95);
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 1px;
  }

  /* Category Filters */
  .filters-container {
    display: flex;
    gap: 15px;
    justify-content: center;
    flex-wrap: wrap;
    margin-bottom: 50px;
  }

  .filter-btn {
    padding: 12px 25px;
    background: rgba(255,255,255,0.1);
    border: 2px solid rgba(255,255,255,0.2);
    border-radius: 50px;
    color: rgba(255,255,255,0.95);
    font-weight: 700;
    font-size: 14px;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    gap: 10px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    backdrop-filter: blur(10px);
  }

  .filter-btn:hover {
    background: rgba(102, 126, 234, 0.3);
    border-color: rgba(102, 126, 234, 0.5);
    transform: translateY(-2px);
  }

  .filter-btn.active {
    background: linear-gradient(135deg, #667eea, #764ba2);
    border-color: transparent;
    color: white;
    transform: translateY(-3px);
    box-shadow: 0 8px 20px rgba(102,126,234,0.4);
  }

  /* Products Grid */
  .best-selling-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
    gap: 35px;
    margin-bottom: 60px;
  }

  .best-selling-card {
    background: rgba(255,255,255,0.08);
    border: 2px solid rgba(255,255,255,0.1);
    border-radius: 25px;
    overflow: hidden;
    transition: all 0.4s ease;
    backdrop-filter: blur(10px);
    position: relative;
  }

  .best-selling-card:hover {
    transform: translateY(-10px) scale(1.02);
    border-color: rgba(102,126,234,0.6);
    background: rgba(255,255,255,0.12);
    box-shadow: 0 20px 40px rgba(0,0,0,0.3);
  }

  .product-rank {
    position: absolute;
    top: 20px;
    left: 20px;
    display: flex;
    align-items: center;
    gap: 12px;
    z-index: 10;
  }

  .rank-number {
    background: linear-gradient(135deg, #667eea, #764ba2);
    color: white;
    width: 45px;
    height: 45px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 900;
    font-size: 18px;
    box-shadow: 0 4px 15px rgba(102,126,234,0.4);
    border: 2px solid white;
  }

  .rank-badge {
    background: linear-gradient(135deg, #ff4500, #ff8c00);
    color: white;
    padding: 8px 15px;
    border-radius: 20px;
    font-size: 12px;
    font-weight: 900;
    text-transform: uppercase;
    letter-spacing: 1px;
    box-shadow: 0 4px 10px rgba(255, 69, 0, 0.3);
  }

  /* Product Image */
  .product-image-container {
    position: relative;
    width: 100%;
    height: 250px;
    overflow: hidden;
    background: linear-gradient(135deg, 
      rgba(20,30,48,0.95), 
      rgba(36,59,85,0.9));
  }

  .product-image {
    width: 100%;
    height: 100%;
    object-fit: contain;
    padding: 30px;
    transition: transform 0.6s ease;
  }

  .best-selling-card:hover .product-image {
    transform: scale(1.1);
  }

  /* Product Content */
  .product-content {
    padding: 25px;
  }

  .product-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 15px;
  }

  .product-sku {
    font-size: 12px;
    color: rgba(255,255,255,0.8);
    background: rgba(0,0,0,0.4);
    padding: 5px 12px;
    border-radius: 12px;
    font-weight: 600;
    letter-spacing: 0.5px;
  }

  .stock-status {
    padding: 6px 12px;
    border-radius: 15px;
    font-size: 12px;
    font-weight: 900;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  .stock-status.available {
    background: rgba(16,185,129,0.3);
    color: #10b981;
    border: 1px solid rgba(16,185,129,0.5);
  }

  .stock-status.lowstock {
    background: rgba(245,158,11,0.3);
    color: #f59e0b;
    border: 1px solid rgba(245,158,11,0.5);
  }

  .stock-status.outstock {
    background: rgba(239,68,68,0.3);
    color: #ef4444;
    border: 1px solid rgba(239,68,68,0.5);
  }

  .product-title {
    font-size: 1.4rem;
    font-weight: 900;
    color: #ffffff;
    margin-bottom: 12px;
    line-height: 1.4;
  }

  .product-title a {
    color: inherit;
    text-decoration: none;
    transition: color 0.3s ease;
  }

  .product-title a:hover {
    color: #667eea;
  }

  /* Rating */
  .stars {
    display: flex;
    align-items: center;
    gap: 4px;
    margin: 12px 0;
  }

  .star {
    color: #ffd700;
    font-size: 18px;
    text-shadow: 0 2px 5px rgba(255, 215, 0, 0.3);
  }

  .rating-value {
    margin-left: 10px;
    font-weight: 900;
    color: #ffffff;
    font-size: 15px;
  }

  /* Price */
  .price-current {
    font-size: 2.2rem;
    font-weight: 900;
    background: linear-gradient(135deg, #667eea, #02adfc);
    -webkit-background-clip: text;
    background-clip: text; /* Added standard property */
    -webkit-text-fill-color: transparent;
    margin-bottom: 10px;
    text-shadow: 0 2px 10px rgba(102,126,234,0.3);
  }

  .save-badge {
    background: linear-gradient(135deg, #cc00e2, #15ff00);
    color: rgb(0, 0, 0);
    padding: 6px 12px;
    border-radius: 15px;
    font-size: 13px;
    font-weight: 900;
    display: inline-block;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    box-shadow: 0 4px 10px rgb(0, 0, 0);
  }

  /* Actions */
  .product-actions {
    display: flex;
    gap: 12px;
    margin: 20px 0;
  }

  .action-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    border: none;
    border-radius: 15px;
    cursor: pointer;
    transition: all 0.3s ease;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  .add-cart-btn {
    flex: 1;
    padding: 16px;
    background: linear-gradient(135deg, #667eea, #764ba2);
    color: white;
    gap: 12px;
    font-size: 14px;
  }

  .add-cart-btn:hover:not(:disabled) {
    transform: translateY(-3px);
    box-shadow: 0 8px 20px rgba(102,126,234,0.4);
  }

  .add-cart-btn:disabled {
    background: #6b7280;
    cursor: not-allowed;
    opacity: 0.7;
  }

  .wishlist-btn,
  .compare-btn {
    width: 55px;
    height: 55px;
    background: rgba(255,255,255,0.15);
    color: rgba(255,255,255,0.95);
    border: 2px solid rgba(255,255,255,0.2);
  }

  .wishlist-btn:hover,
  .compare-btn:hover {
    background: rgba(102, 126, 234, 0.3);
    border-color: #667eea;
    transform: translateY(-3px);
  }

  .btn-icon {
    font-size: 20px;
  }

  /* Quick Stats */
  .quick-stats {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 12px;
    padding-top: 20px;
    border-top: 1px solid rgba(255,255,255,0.15);
  }

  .stat-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px;
    padding: 12px;
    background: rgba(255,255,255,0.08);
    border-radius: 12px;
    font-size: 12px;
    text-align: center;
    transition: all 0.3s ease;
  }

  .stat-item:hover {
    background: rgba(102, 126, 234, 0.2);
    transform: translateY(-3px);
  }

  /* No Products */
  .no-products {
    grid-column: 1 / -1;
    text-align: center;
    padding: 60px 20px;
    color: rgba(255,255,255,0.8);
  }

  .no-products h3 {
    font-size: 1.8rem;
    margin-bottom: 20px;
    color: #ffffff;
  }

  /* View More */
  .view-more-container {
    text-align: center;
    margin-top: 40px;
  }

  .view-more-btn {
    display: inline-flex;
    align-items: center;
    gap: 15px;
    padding: 18px 40px;
    background: linear-gradient(135deg, #667eea, #764ba2);
    color: white;
    border-radius: 50px;
    text-decoration: none;
    font-weight: 900;
    font-size: 16px;
    transition: all 0.3s ease;
    text-transform: uppercase;
    letter-spacing: 1px;
    box-shadow: 0 8px 25px rgba(102,126,234,0.3);
  }

  .view-more-btn:hover {
    transform: translateY(-5px);
    box-shadow: 0 15px 35px rgba(102,126,234,0.4);
    gap: 20px;
  }

  /* ===== ENHANCED FEATURES ===== */
  .features-section {
    padding: 80px 5%;
    background: linear-gradient(135deg, 
      rgba(10, 14, 23, 0.95), 
      rgba(20, 30, 48, 0.98));
    border-top: 1px solid rgba(102, 126, 234, 0.3);
  }
  
  .features-grid {
    max-width: 1400px;
    margin: 0 auto;
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 30px;
  }
  
  .feature-card {
    background: rgba(255, 255, 255, 0.08);
    border: 2px solid rgba(255, 255, 255, 0.15);
    border-radius: 20px;
    padding: 35px 25px;
    text-align: center;
    transition: all 0.4s ease;
    backdrop-filter: blur(10px);
  }
  
  .feature-card:hover {
    transform: translateY(-10px);
    border-color: rgba(102, 126, 234, 0.6);
    background: rgba(255, 255, 255, 0.12);
    box-shadow: 0 20px 40px rgba(102, 126, 234, 0.2);
  }
  
  .feature-icon {
    font-size: 3.5rem;
    margin-bottom: 25px;
    display: block;
    filter: drop-shadow(0 4px 8px rgba(0,0,0,0.3));
  }
  
  .feature-title {
    font-size: 1.5rem;
    font-weight: 900;
    margin-bottom: 15px;
    color: #ffffff;
    text-transform: uppercase;
    letter-spacing: 1px;
  }
  
  .feature-description {
    color: rgba(255, 255, 255, 0.9);
    line-height: 1.7;
    font-size: 1rem;
  }

  /* ===== UTILITIES ===== */
  .container {
    max-width: 1400px;
    margin: 0 auto;
    padding: 0 20px;
  }

  .scroll-indicator {
    position: absolute;
    bottom: 120px;
    left: 50%;
    transform: translateX(-50%);
    width: 30px;
    height: 50px;
    border: 3px solid rgba(102, 126, 234, 0.6);
    border-radius: 15px;
    display: flex;
    align-items: flex-start;
    justify-content: center;
    padding-top: 10px;
    cursor: pointer;
    transition: all 0.3s ease;
    background: rgba(0, 0, 0, 0.3);
  }
  
  .scroll-indicator:hover {
    border-color: #667eea;
    background: rgba(102, 126, 234, 0.2);
  }
  
  .scroll-indicator::after {
    content: '';
    display: block;
    width: 6px;
    height: 6px;
    background: #667eea;
    border-radius: 50%;
    animation: scrollDown 2s infinite;
  }

  /* Product Card Link */
  .best-selling-card-link {
    display: block;
    position: relative;
    transition: all 0.3s ease;
  }

  .best-selling-card-link:hover {
    transform: translateY(-5px);
  }

  /* View Details Overlay */
  .view-details-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, 
      rgba(102, 126, 234, 0.9), 
      rgba(118, 75, 162, 0.9));
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    transition: opacity 0.3s ease;
    color: white;
    font-weight: 900;
    font-size: 1.2rem;
    text-transform: uppercase;
    letter-spacing: 1px;
    border-radius: 20px 20px 0 0;
  }

  .product-image-container:hover .view-details-overlay {
    opacity: 1;
  }

  /* Make sure product actions don't trigger card click */
  .product-actions {
    pointer-events: auto;
  }

  .action-btn {
    pointer-events: auto;
    position: relative;
    z-index: 2;
  }

  /* Card hover effects */
  .best-selling-card-link:hover .best-selling-card {
    transform: translateY(-10px) scale(1.02);
    border-color: rgba(102,126,234,0.8);
    background: rgba(255,255,255,0.15);
    box-shadow: 0 25px 50px rgba(102,126,234,0.3);
  }

  .best-selling-card-link:hover .view-details-overlay {
    opacity: 1;
  }

  /* Quick view indicator */
  .best-selling-card-link::after {
    content: 'üëÅÔ∏è QUICK VIEW';
    position: absolute;
    top: -10px;
    right: -10px;
    background: linear-gradient(135deg, #667eea, #764ba2);
    color: white;
    padding: 5px 15px;
    border-radius: 20px;
    font-size: 11px;
    font-weight: 900;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    opacity: 0;
    transform: translateY(10px);
    transition: all 0.3s ease;
    z-index: 20;
    box-shadow: 0 4px 15px rgba(102,126,234,0.4);
  }

  .best-selling-card-link:hover::after {
    opacity: 1;
    transform: translateY(0);
  }

  /* ===== ANIMATIONS ===== */
  @keyframes gradientShift {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
  }
  
  @keyframes scroll {
    0% { transform: translateX(0); }
    100% { transform: translateX(-50%); }
  }
  
  @keyframes scrollDown {
    0% { transform: translateY(0); opacity: 1; }
    100% { transform: translateY(20px); opacity: 0; }
  }

  /* Ripple animation */
  @keyframes ripple {
    to {
      transform: scale(4);
      opacity: 0;
    }
  }

  /* ===== RESPONSIVE ===== */
  @media (max-width: 1200px) {
    .hero-grid {
      gap: 40px;
    }
    
    .best-selling-grid {
      grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
    }
  }
  
  @media (max-width: 992px) {
    .hero-grid {
      grid-template-columns: 1fr;
      text-align: center;
      gap: 50px;
    }
    
    .hero-slideshow {
      order: -1;
      height: 400px;
      max-width: 600px;
      margin: 0 auto;
    }
    
    .hero-text-slideshow {
      height: 180px;
    }
    
    .section-title {
      font-size: 2.8rem;
    }
  }
  
  @media (max-width: 768px) {
    .hero {
      min-height: 75vh;
      padding: 40px 5% 60px;
    }
    
    .hero-title {
      font-size: 2.2rem;
    }
    
    .hero-slideshow {
      height: 350px;
    }
    
    .best-selling-grid {
      grid-template-columns: 1fr;
    }
    
    .section-title {
      font-size: 2.2rem;
      flex-direction: column;
      gap: 10px;
    }
    
    .top-search-form {
      flex-direction: column;
      border-radius: 20px;
      padding: 10px;
    }
    
    .top-search-input {
      border-radius: 15px;
      margin-bottom: 10px;
      text-align: center;
    }
    
    .top-search-btn {
      width: 100%;
      border-radius: 15px;
    }
    
    .stats-grid {
      grid-template-columns: repeat(2, 1fr);
    }
    
    .performance-cards {
      grid-template-columns: 1fr;
    }
  }
  
  @media (max-width: 576px) {
    .hero-title {
      font-size: 1.8rem;
    }
    
    .hero-subtitle {
      font-size: 1rem;
    }
    
    .section-title {
      font-size: 1.8rem;
    }
    
    .stats-grid {
      grid-template-columns: 1fr;
      gap: 20px;
    }
    
    .hero-buttons {
      flex-direction: column;
    }
    
    .btn {
      width: 100%;
      justify-content: center;
    }
    
    .features-grid {
      grid-template-columns: 1fr;
    }
  }
</style>

<!-- Video Background -->
<div class="video-background">
  <video autoplay muted loop playsinline>
    <source src="{% static 'videos/SHOPVIEW.mp4' %}" type="video/mp4">
  </video>
</div>

<!-- Gradient Background -->
<div class="gradient-bg"></div>

<!-- Content Overlay for Better Readability -->
<div class="content-overlay">
  <!-- Top Search -->
  <section class="top-search-section">
    <form method="GET" action="{% url 'search' %}" class="top-search-form" id="topSearchForm">
      <input 
        type="text" 
        name="q" 
        class="top-search-input" 
        placeholder="üîç Search smartphones, accessories, and more..." 
        autocomplete="off"
        id="topSearchInput"
        value="{{ request.GET.q|default:'' }}"
      >
      <button type="submit" class="top-search-btn">
        <span>SEARCH</span>
      </button>
    </form>
  </section>

  <!-- Hero Section -->
  <section class="hero" id="home">
    <div class="hero-content">
      <div class="hero-grid">
        <div class="hero-text">
          <div class="hero-badge">
            <span>‚ö°</span>
            <span>PREMIUM TECH ‚Ä¢ UNBEATABLE PRICES</span>
          </div>
          
          <div class="hero-text-slideshow">
            <div class="text-slide active">
              <h1 class="hero-title">
                DISCOVER<br>
                <span class="highlight">PREMIUM TECHNOLOGY</span>
              </h1>
              <p class="hero-subtitle">
                Latest smartphones, cutting-edge accessories, and premium gadgets at prices you won't believe.
                Quality meets affordability at Fieldmax.
              </p>
            </div>
            
            <div class="text-slide">
              <h1 class="hero-title">
                SMART<br>
                <span class="highlight">INNOVATION</span>
              </h1>
              <p class="hero-subtitle">
                Experience the newest tech from leading brands. Stay ahead with the latest innovations in mobile technology.
              </p>
            </div>
            
            <div class="text-slide">
              <h1 class="hero-title">
                PREMIUM<br>
                <span class="highlight">QUALITY</span>
              </h1>
              <p class="hero-subtitle">
                Every product is handpicked for quality and performance. Your satisfaction is our guarantee.
              </p>
            </div>
          </div>
          
          <div class="text-slideshow-nav">
            <span class="text-nav-dot active" onclick="goToTextSlide(0)"></span>
            <span class="text-nav-dot" onclick="goToTextSlide(1)"></span>
            <span class="text-nav-dot" onclick="goToTextSlide(2)"></span>
          </div>
          
          <div class="hero-buttons">
            <a href="{% url 'shop' %}" class="btn btn-primary">
              <span>üõçÔ∏è</span>
              <span>START SHOPPING</span>
            </a>
            <a href="#best-selling" class="btn btn-secondary">
              <span>üî•</span>
              <span>BEST DEALS</span>
            </a>
          </div>
        </div>
        
        <div class="hero-slideshow">
          <div class="slideshow-container" id="slideshow">
            <div class="slide active">
              <div class="slide-title">EXPERT PHONE REPAIRS</div>
              <img src="{% static 'images/REPAIRS.png' %}" alt="Professional Phone Repairs" loading="lazy">
            </div>
            <div class="slide">
              <div class="slide-title">TECNO PHANTOM SERIES</div>
              <img src="{% static 'images/PHANTOM.png' %}" alt="Tecno Phantom Premium Smartphones" loading="lazy">
            </div>
            <div class="slide">
              <div class="slide-title">PREMIUM AUDIO GEAR</div>
              <img src="{% static 'images/EARPODS.png' %}" alt="High-Quality Earpods" loading="lazy">
            </div>
          </div>
          <div class="slideshow-arrow prev" onclick="changeSlide(-1)">‚ùÆ</div>
          <div class="slideshow-arrow next" onclick="changeSlide(1)">‚ùØ</div>
          <div class="slideshow-nav">
            <span class="nav-dot active" onclick="goToSlide(0)"></span>
            <span class="nav-dot" onclick="goToSlide(1)"></span>
            <span class="nav-dot" onclick="goToSlide(2)"></span>
          </div>
        </div>
      </div>
    </div>
    
    <div class="scroll-indicator" onclick="document.getElementById('stats').scrollIntoView({behavior: 'smooth'})"></div>
    
    <div class="marquee-container">
      <div class="marquee">
        <div class="marquee-content">
          <div class="marquee-item"><span>üì±</span><span>SMARTPHONES</span></div>
          <div class="marquee-item"><span>üéß</span><span>HEADPHONES</span></div>
          <div class="marquee-item"><span>‚åö</span><span>SMARTWATCHES</span></div>
          <div class="marquee-item"><span>üíª</span><span>LAPTOPS</span></div>
          <div class="marquee-item"><span>üîã</span><span>POWER BANKS</span></div>
          <div class="marquee-item"><span>üì±</span><span>ACCESSORIES</span></div>
        </div>
        <div class="marquee-content" aria-hidden="true">
          <div class="marquee-item"><span>üì±</span><span>SMARTPHONES</span></div>
          <div class="marquee-item"><span>üéß</span><span>HEADPHONES</span></div>
          <div class="marquee-item"><span>‚åö</span><span>SMARTWATCHES</span></div>
          <div class="marquee-item"><span>üíª</span><span>LAPTOPS</span></div>
          <div class="marquee-item"><span>üîã</span><span>POWER BANKS</span></div>
          <div class="marquee-item"><span>üì±</span><span>ACCESSORIES</span></div>
        </div>
      </div>
    </div>
  </section>

  <!-- Stats -->
  <section class="stats-section" id="stats">
    <div class="container">
      <div class="stats-grid">
        <div class="stat-card">
          <span class="stat-number" data-target="1000">0+</span>
          <span class="stat-label">Premium Products</span>
        </div>
        <div class="stat-card">
          <span class="stat-number" data-target="50000">0+</span>
          <span class="stat-label">Happy Customers</span>
        </div>
        <div class="stat-card">
          <span class="stat-number" data-target="99">99%</span>
          <span class="stat-label">Satisfaction Rate</span>
        </div>
        <div class="stat-card">
          <span class="stat-number">24/7</span>
          <span class="stat-label">Customer Support</span>
        </div>
      </div>
    </div>
  </section>

  <!-- Best Selling -->
  <section class="best-selling-section" id="best-selling">
    <div class="container">
      <div class="section-header">
        <h2 class="section-title">
          <span class="title-icon">üî•</span>
          CUSTOMER FAVORITES
        </h2>
        <p class="section-subtitle">Top-rated products loved by thousands of customers</p>
      </div>
      
      <div class="performance-cards">
        <div class="performance-card">
          <div class="performance-icon">‚≠ê</div>
          <div class="performance-info">
            <div class="performance-value">98%</div>
            <div class="performance-label">Customer Satisfaction</div>
          </div>
        </div>
        <div class="performance-card">
          <div class="performance-icon">üöÄ</div>
          <div class="performance-info">
            <div class="performance-value">{{ featured_products|length }}+</div>
            <div class="performance-label">Top Performing</div>
          </div>
        </div>
      </div>
      
      <div class="filters-container">
        <button class="filter-btn active" data-category="all">
          <span>üì¶</span>
          <span>All Products</span>
        </button>
        {% for cat in categories %}
          <button class="filter-btn" data-category="{{ cat.name|lower|slugify }}">
            <span>
              {% if "phone" in cat.name|lower %}üì±
              {% elif "headphone" in cat.name|lower %}üéß
              {% elif "watch" in cat.name|lower %}‚åö
              {% elif "laptop" in cat.name|lower %}üíª
              {% elif "accessory" in cat.name|lower %}üîß
              {% else %}üì¶{% endif %}
            </span>
            <span>{{ cat.name }}</span>
          </button>
        {% endfor %}
      </div>
      
      <div class="best-selling-grid">
        {% if featured_products %}
          {% for product in featured_products %}
            <!-- Make entire card clickable -->
            <a href="{% url 'product_detail' product.id %}" class="best-selling-card-link" style="text-decoration: none; color: inherit;">
              <div class="best-selling-card" data-category="{{ product.category.name|lower|slugify }}">
                <div class="product-rank">
                  <span class="rank-number">#{{ forloop.counter }}</span>
                  {% if product.is_featured %}
                    <span class="rank-badge">BEST SELLER</span>
                  {% endif %}
                </div>
                
                <div class="product-image-container">
                  {% if product.image %}
                    <img src="{{ product.image.url }}" alt="{{ product.display_name }}" class="product-image">
                  {% else %}
                    <div style="display:flex;align-items:center;justify-content:center;height:100%;color:#667eea;font-size:3rem;">
                      üì±
                    </div>
                  {% endif %}
                  <!-- Add overlay with "View Details" text on hover -->
                  <div class="view-details-overlay">
                    <span>üîç VIEW DETAILS</span>
                  </div>
                </div>
                
                <div class="product-content">
                  <div class="product-header">
                    <div class="product-sku">{{ product.product_code|slice:":8" }}</div>
                    {% if product.status == 'available' %}
                      <div class="stock-status available">IN STOCK</div>
                    {% elif product.status == 'lowstock' %}
                      <div class="stock-status lowstock">LOW STOCK</div>
                    {% else %}
                      <div class="stock-status outstock">SOLD OUT</div>
                    {% endif %}
                  </div>
                  
                  <h3 class="product-title">
                    {{ product.display_name|truncatechars:40 }}
                  </h3>
                  
                  <div class="stars">
                    <span class="star">‚≠ê</span><span class="star">‚≠ê</span><span class="star">‚≠ê</span><span class="star">‚≠ê</span><span class="star">‚≠ê</span>
                    <span class="rating-value">4.8</span>
                  </div>
                  
                  <div class="price-current">
                    KSh {{ product.selling_price|floatformat:0 }}
                    {% if product.buying_price and product.buying_price < product.selling_price %}
                      <div style="margin-top:10px;">
                        <span class="save-badge">
                          SAVE {{ product.profit_margin|floatformat:0 }}
                        </span>
                      </div>
                    {% endif %}
                  </div>
                  
                  <div class="product-actions">
                    {% if product.status == 'available' or product.status == 'lowstock' %}
                      <button class="action-btn add-cart-btn"
                              data-product-id="{{ product.id }}"
                              data-product-name="{{ product.display_name }}"
                              data-product-price="{{ product.selling_price }}"
                              onclick="event.preventDefault(); addToCart(event, '{{ product.id }}', '{{ product.display_name|escapejs }}', '{{ product.selling_price }}')">
                        <span class="btn-icon">üõí</span>
                        <span>ADD TO CART</span>
                      </button>
                      <button class="action-btn wishlist-btn" 
                              onclick="event.preventDefault(); addToWishlist(event, '{{ product.id }}', '{{ product.display_name|escapejs }}')"
                              title="Add to Wishlist">
                        <span class="btn-icon">‚ù§Ô∏è</span>
                      </button>
                    {% else %}
                      <button class="action-btn add-cart-btn" disabled>
                        <span class="btn-icon">‚è≥</span>
                        <span>SOLD OUT</span>
                      </button>
                    {% endif %}
                  </div>
                  
                  <div class="quick-stats">
                    <div class="stat-item">
                      <span>üöö</span>
                      <span>Free Shipping</span>
                    </div>
                    <div class="stat-item">
                      <span>üîí</span>
                      <span>1 Year Warranty</span>
                    </div>
                    <div class="stat-item">
                      <span>‚ú®</span>
                      <span>New Arrival</span>
                    </div>
                  </div>
                </div>
              </div>
            </a>
          {% endfor %}
        {% else %}
          <div class="no-products">
            <div style="font-size:4rem;margin-bottom:20px;">üì±</div>
            <h3>No Featured Products Available</h3>
            <p style="margin-bottom:25px;font-size:1.1rem;">Check back soon for our latest arrivals</p>
            <a href="{% url 'shop' %}" class="view-more-btn" style="margin-top:15px;">
              <span>BROWSE ALL PRODUCTS</span>
            </a>
          </div>
        {% endif %}
      </div>
      
      <div class="view-more-container">
        <a href="{% url 'shop' %}" class="view-more-btn">
          <span>EXPLORE FULL CATALOG</span>
          <span>‚Üí</span>
        </a>
      </div>
    </div>
  </section>

  <!-- Features -->
  <section class="features-section">
    <div class="container">
      <div class="features-grid">
        <div class="feature-card">
          <span class="feature-icon">üöö</span>
          <h3 class="feature-title">Fast Delivery</h3>
          <p class="feature-description">Same-day delivery in major cities. We deliver right to your doorstep.</p>
        </div>
        <div class="feature-card">
          <span class="feature-icon">üîí</span>
          <h3 class="feature-title">Secure Payment</h3>
          <p class="feature-description">100% secure payment options with encryption for your peace of mind.</p>
        </div>
        <div class="feature-card">
          <span class="feature-icon">üîÑ</span>
          <h3 class="feature-title">Easy Returns</h3>
          <p class="feature-description">14-day hassle-free return policy. Your satisfaction is guaranteed.</p>
        </div>
        <div class="feature-card">
          <span class="feature-icon">üìû</span>
          <h3 class="feature-title">24/7 Support</h3>
          <p class="feature-description">Round-the-clock customer support. We're always here to help you.</p>
        </div>
      </div>
    </div>
  </section>
</div>

<script>
  // Define functions first so they're available globally
  function addToCart(event, productId, productName, productPrice) {
    event.stopPropagation(); // Prevent card click
    
    // Get cart
    let cart = JSON.parse(localStorage.getItem('fieldmax_cart') || '[]');
    
    // Check if item already exists
    const existingIndex = cart.findIndex(item => item.id === productId);
    if (existingIndex > -1) {
      cart[existingIndex].quantity += 1;
    } else {
      cart.push({
        id: productId,
        name: productName,
        price: parseFloat(productPrice),
        quantity: 1,
        timestamp: Date.now()
      });
    }
    
    // Save
    localStorage.setItem('fieldmax_cart', JSON.stringify(cart));
    
    // Visual feedback
    const button = event.target.closest('.add-cart-btn');
    const originalHTML = button.innerHTML;
    const originalBg = button.style.background;
    button.innerHTML = '<span class="btn-icon">‚úÖ</span><span>ADDED!</span>';
    button.style.background = 'linear-gradient(135deg, #10b981, #059669)';
    button.style.transform = 'translateY(-3px) scale(1.05)';
    
    // Ripple effect
    const ripple = document.createElement('div');
    ripple.style.cssText = `
      position: absolute;
      border-radius: 50%;
      background: rgba(16, 185, 129, 0.4);
      transform: scale(0);
      animation: ripple 0.6s linear;
    `;
    
    const rect = button.getBoundingClientRect();
    const size = Math.max(rect.width, rect.height);
    const x = rect.width / 2 - size / 2;
    const y = rect.height / 2 - size / 2;
    
    ripple.style.width = ripple.style.height = size + 'px';
    ripple.style.left = x + 'px';
    ripple.style.top = y + 'px';
    
    button.style.position = 'relative';
    button.appendChild(ripple);
    
    setTimeout(() => {
      button.innerHTML = originalHTML;
      button.style.background = originalBg;
      button.style.transform = '';
      ripple.remove();
    }, 1500);
    
    // Show toast notification
    showToast(`${productName} added to cart`);
    
    // Update cart count
    updateCartCount();
  }

  function addToWishlist(event, productId, productName) {
    event.stopPropagation(); // Prevent card click
    
    // Get wishlist
    let wishlist = JSON.parse(localStorage.getItem('fieldmax_wishlist') || '[]');
    
    // Check if already in wishlist
    if (!wishlist.find(item => item.id === productId)) {
      wishlist.push({
        id: productId,
        name: productName,
        timestamp: Date.now()
      });
      
      // Save
      localStorage.setItem('fieldmax_wishlist', JSON.stringify(wishlist));
      
      // Visual feedback
      const button = event.target.closest('.wishlist-btn');
      const originalHTML = button.innerHTML;
      button.innerHTML = '<span class="btn-icon">‚ù§Ô∏è</span>';
      button.style.color = '#ef4444';
      button.style.transform = 'scale(1.2)';
      
      setTimeout(() => {
        button.innerHTML = originalHTML;
        button.style.color = '';
        button.style.transform = '';
      }, 1000);
      
      // Show toast
      showToast(`${productName} added to wishlist`);
    } else {
      showToast(`${productName} is already in your wishlist`);
    }
  }

  function updateCartCount() {
    const cart = JSON.parse(localStorage.getItem('fieldmax_cart') || '[]');
    const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
    
    // Update cart icon in navbar if exists
    const cartIcon = document.querySelector('.cart-icon-count');
    if (cartIcon) {
      cartIcon.textContent = totalItems;
      if (totalItems > 0) {
        cartIcon.style.display = 'flex';
      }
    }
  }

  function showToast(message) {
    // Remove existing toast
    const existingToast = document.getElementById('toast');
    if (existingToast) existingToast.remove();
    
    // Create toast
    const toast = document.createElement('div');
    toast.id = 'toast';
    toast.style.cssText = `
      position: fixed;
      bottom: 30px;
      right: 30px;
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: white;
      padding: 16px 24px;
      border-radius: 12px;
      transform: translateX(400px);
      transition: transform 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
      z-index: 10000;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
      display: flex;
      align-items: center;
      gap: 12px;
      max-width: 350px;
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.2);
    `;
    
    toast.innerHTML = `
      <span style="font-size: 20px;">üéâ</span>
      <div>
        <div style="font-weight: 700; margin-bottom: 4px;">Success!</div>
        <div style="font-size: 14px; opacity: 0.9;">${message}</div>
      </div>
    `;
    
    document.body.appendChild(toast);
    
    // Animate in
    setTimeout(() => {
      toast.style.transform = 'translateX(0)';
    }, 10);
    
    // Animate out and remove
    setTimeout(() => {
      toast.style.transform = 'translateX(400px)';
      setTimeout(() => {
        if (toast.parentNode) {
          toast.parentNode.removeChild(toast);
        }
      }, 400);
    }, 3000);
  }

  // Slideshow functions
  window.changeSlide = function(n) {
    const slides = document.querySelectorAll('.slide');
    const dots = document.querySelectorAll('.nav-dot');
    let currentSlide = parseInt(document.querySelector('.slide.active').dataset.slideIndex || 0);
    
    slides[currentSlide].classList.remove('active');
    dots[currentSlide].classList.remove('active');
    currentSlide = (currentSlide + n + slides.length) % slides.length;
    slides[currentSlide].classList.add('active');
    dots[currentSlide].classList.add('active');
  };

  window.goToSlide = function(n) {
    const slides = document.querySelectorAll('.slide');
    const dots = document.querySelectorAll('.nav-dot');
    let currentSlide = parseInt(document.querySelector('.slide.active').dataset.slideIndex || 0);
    
    slides[currentSlide].classList.remove('active');
    dots[currentSlide].classList.remove('active');
    currentSlide = n;
    slides[currentSlide].classList.add('active');
    dots[currentSlide].classList.add('active');
  };

  window.goToTextSlide = function(n) {
    const textSlides = document.querySelectorAll('.text-slide');
    const textDots = document.querySelectorAll('.text-nav-dot');
    let currentTextSlide = parseInt(document.querySelector('.text-slide.active').dataset.slideIndex || 0);
    
    textSlides[currentTextSlide].classList.remove('active');
    textDots[currentTextSlide].classList.remove('active');
    currentTextSlide = n;
    textSlides[currentTextSlide].classList.add('active');
    textDots[currentTextSlide].classList.add('active');
  };

  document.addEventListener('DOMContentLoaded', function() {
    // Initialize slide indices
    document.querySelectorAll('.slide').forEach((slide, index) => {
      slide.dataset.slideIndex = index;
    });
    
    document.querySelectorAll('.text-slide').forEach((slide, index) => {
      slide.dataset.slideIndex = index;
    });
    
    // Image Slideshow
    const slides = document.querySelectorAll('.slide');
    const dots = document.querySelectorAll('.nav-dot');
    let currentSlide = 0;
    let slideInterval;
    
    function showSlide(n) {
      slides[currentSlide].classList.remove('active');
      dots[currentSlide].classList.remove('active');
      currentSlide = (n + slides.length) % slides.length;
      slides[currentSlide].classList.add('active');
      dots[currentSlide].classList.add('active');
    }
    
    function startSlideShow() {
      slideInterval = setInterval(() => {
        showSlide(currentSlide + 1);
      }, 5000);
    }
    
    startSlideShow();
    
    // Text Slideshow
    const textSlides = document.querySelectorAll('.text-slide');
    const textDots = document.querySelectorAll('.text-nav-dot');
    let currentTextSlide = 0;
    let textSlideInterval;
    
    function showTextSlide(n) {
      textSlides[currentTextSlide].classList.remove('active');
      textDots[currentTextSlide].classList.remove('active');
      currentTextSlide = (n + textSlides.length) % textSlides.length;
      textSlides[currentTextSlide].classList.add('active');
      textDots[currentTextSlide].classList.add('active');
    }
    
    function startTextSlideShow() {
      textSlideInterval = setInterval(() => {
        showTextSlide(currentTextSlide + 1);
      }, 4000);
    }
    
    startTextSlideShow();
    
    // Counters with improved animation
    document.querySelectorAll('[data-target]').forEach(counter => {
      const target = parseInt(counter.dataset.target);
      let current = 0;
      const increment = target / 50;
      
      const update = () => {
        if (current < target) {
          current += increment;
          counter.textContent = Math.ceil(current) + (counter.textContent.includes('%') ? '%' : '+');
          setTimeout(update, 30);
        } else {
          counter.textContent = target + (counter.textContent.includes('%') ? '%' : '+');
        }
      };
      
      const observer = new IntersectionObserver((entries) => {
        if (entries[0].isIntersecting) {
          update();
        }
      }, { threshold: 0.5 });
      observer.observe(counter);
    });
    
    // Product Filters
    const filterBtns = document.querySelectorAll('.filter-btn');
    const productCards = document.querySelectorAll('.best-selling-card-link');
    
    filterBtns.forEach(btn => {
      btn.addEventListener('click', function() {
        filterBtns.forEach(b => b.classList.remove('active'));
        this.classList.add('active');
        
        const category = this.dataset.category;
        
        productCards.forEach(card => {
          const productCard = card.querySelector('.best-selling-card');
          if (category === 'all' || productCard.dataset.category === category) {
            card.style.display = 'block';
            setTimeout(() => {
              card.style.opacity = '1';
              card.style.transform = 'translateY(0)';
            }, 100);
          } else {
            card.style.opacity = '0';
            card.style.transform = 'translateY(20px)';
            setTimeout(() => {
              card.style.display = 'none';
            }, 300);
          }
        });
      });
    });
    
    // Top Search with improved UX
    const topSearchInput = document.getElementById('topSearchInput');
    const topSearchForm = document.getElementById('topSearchForm');
    
    topSearchInput.addEventListener('focus', function() {
      this.style.background = 'rgba(255, 255, 255, 0.2)';
    });
    
    topSearchInput.addEventListener('blur', function() {
      this.style.background = '';
    });
    
    topSearchForm.addEventListener('submit', function(e) {
      if (!topSearchInput.value.trim()) {
        e.preventDefault();
        topSearchInput.style.border = '2px solid #ef4444';
        setTimeout(() => {
          topSearchInput.style.border = '';
        }, 1000);
        topSearchInput.focus();
      }
    });
    
    // Initialize cart count
    updateCartCount();
    
    // Smooth scroll for anchor links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function (e) {
        e.preventDefault();
        
        const targetId = this.getAttribute('href');
        if (targetId === '#') return;
        
        const targetElement = document.querySelector(targetId);
        if (targetElement) {
          window.scrollTo({
            top: targetElement.offsetTop - 80,
            behavior: 'smooth'
          });
        }
      });
    });
  });
</script>

{% endblock %}