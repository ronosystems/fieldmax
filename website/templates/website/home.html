{% extends 'website/base.html' %}
{% load static %}

{% block title %}Home - Fieldmax | Premium Tech at Unbeatable Prices{% endblock %}

{% block content %}
<style>
  /* ===== FIXED VISIBILITY ISSUES ===== */
  
  /* Base fixes for text visibility */
  body {
    color: #726f6f !important;
    background: #0a0e17;
    position: relative;
    z-index: 1;
  }

  /* Override all text to be visible */
  * {
    color: inherit;
  }

  /* Video background fix */
  .video-background {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: -2;
    overflow: hidden;
  }
  
  .video-background video {
    width: 100%;
    height: 100%;
    object-fit: cover;
    opacity: 0.15; /* Reduced opacity for better text visibility */
    filter: brightness(0.3) blur(1px);
  }
  
  .video-background::after {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(180deg, 
      rgba(10, 14, 23, 0.95) 0%, 
      rgba(10, 14, 23, 0.85) 100%);
  }

  /* Fix gradient background */
  .gradient-bg {
    position: fixed;
    inset: 0;
    z-index: -3;
    background: linear-gradient(135deg, 
      rgba(102, 126, 234, 0.3) 0%, 
      rgba(118, 75, 162, 0.2) 25%, 
      rgba(240, 147, 251, 0.15) 50%, 
      rgba(79, 172, 254, 0.2) 75%, 
      rgba(0, 242, 254, 0.25) 100%);
    background-size: 400% 400%;
    animation: gradientShift 20s ease infinite;
  }

  /* ===== MODIFIED HERO SECTION WITH DYNAMIC TEXT SLIDESHOW ===== */
  .hero {
    position: relative;
    min-height: 90vh;
    display: flex;
    align-items: center;
    padding: 80px 5%;
    color: #0037ff;
    overflow: hidden;
    z-index: 1;
    margin-bottom: 0;
  }
  
  .hero-content {
    max-width: 1400px;
    width: 100%;
    margin: 0 auto;
    position: relative;
    z-index: 3;
  }
  
  .hero-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 60px;
    align-items: center;
  }
  
  /* Hero text improvements with dynamic slideshow */
  .hero-text {
    animation: fadeInUp 1s ease;
    position: relative;
    z-index: 2;
    min-height: 400px;
  }
  
  .hero-badge {
    display: inline-flex;
    align-items: center;
    gap: 10px;
    background: #000000;
    backdrop-filter: blur(20px);
    padding: 12px 24px;
    border-radius: 50px;
    font-size: 25px;
    font-weight: 1200;
    letter-spacing: 1.5px;
    border: 1px solid rgb(255, 251, 251);
    margin-bottom: 30px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    color: #00d5ff;
  }
  
  /* Dynamic text slideshow container */
  .hero-text-slideshow {
    position: relative;
    height: 250px;
    overflow: hidden;
    margin-bottom: 30px;
  }
  
  .text-slide {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    opacity: 0;
    transform: translateY(30px);
    transition: opacity 0.8s ease, transform 0.8s ease;
    pointer-events: none;
  }
  
  .text-slide.active {
    opacity: 1;
    transform: translateY(0);
    pointer-events: auto;
  }
  
  .hero-title {
    font-size: clamp(2.5rem, 5vw, 3.8rem);
    font-weight: 900;
    line-height: 1.1;
    margin-bottom: 20px;
    letter-spacing: -1px;
    color: #ffffff;
    text-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
    min-height: 140px;
    display: flex;
    flex-direction: column;
    justify-content: center;
  }
  
  .hero-title .highlight {
    background: linear-gradient(135deg, #667eea 0%, #02adfc 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    display: inline-block;
    animation: shimmer 3s ease-in-out infinite;
  }
  
  .hero-title .highlight-2 {
    background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    display: inline-block;
  }
  
  .hero-title .highlight-3 {
    background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    display: inline-block;
  }
  
  .hero-subtitle {
    font-size: 1.25rem;
    line-height: 1.6;
    opacity: 0.9;
    margin-bottom: 15px;
    max-width: 500px;
    color: rgb(0, 0, 0);
    text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
    min-height: 80px;
  }
  
  /* Text slideshow navigation */
  .text-slideshow-nav {
    display: flex;
    gap: 12px;
    margin-top: 20px;
  }
  
  .text-nav-dot {
    width: 10px;
    height: 10px;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.3);
    cursor: pointer;
    transition: all 0.3s ease;
  }
  
  .text-nav-dot.active {
    background: #667eea;
    transform: scale(1.3);
    box-shadow: 0 0 10px rgba(102, 126, 234, 0.8);
  }
  
  /* Button visibility fixes */
  .hero-buttons {
    display: flex;
    gap: 20px;
    flex-wrap: wrap;
  }
  
  .btn {
    display: inline-flex;
    align-items: center;
    gap: 10px;
    padding: 16px 32px;
    border-radius: 50px;
    font-weight: 600;
    font-size: 16px;
    text-decoration: none;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    border: 2px solid transparent;
    cursor: pointer;
    position: relative;
    overflow: hidden;
    text-transform: uppercase;
    letter-spacing: 1px;
    color: #103bf9;
  }
  
  .btn-primary {
    background: linear-gradient(135deg, #667eea 0%, #02adfc 100%);
    color: #ff0707 !important;
    box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
  }
  
  .btn-primary:hover {
    transform: translateY(-3px);
    box-shadow: 0 20px 40px rgba(87, 107, 196, 0.6);
  }
  
  .btn-secondary {
    background: rgb(0, 0, 255);
    color: #ff0000 !important;
    border: 2px solid rgb(255, 208, 0);
    backdrop-filter: blur(10px);
  }
  
  .btn-secondary:hover {
    background: rgb(0, 0, 0);
    border-color: rgba(255, 255, 255, 0.5);
    transform: translateY(-3px);
  }

  /* ===== MODIFIED SLIDESHOW SECTION WITH TITLES ===== */
  .hero-slideshow {
    position: relative;
    width: 100%;
    height: 550px;
    overflow: hidden;
    animation: fadeInRight 1.2s ease;
  }
  
  .slideshow-container {
    position: relative;
    width: 100%;
    height: 100%;
  }
  
  .slide {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    opacity: 0;
    transition: opacity 1.5s cubic-bezier(0.4, 0, 0.2, 1);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 20px;
  }
  
  .slide.active {
    opacity: 1;
    z-index: 2;
  }
  
  .slide-title {
    color: #ffffff;
    font-size: 1.5rem;
    font-weight: 700;
    text-align: center;
    margin-bottom: 20px;
    text-shadow: 0 2px 10px rgba(0, 0, 0, 0.7);
    background: rgb(0, 0, 0);
    padding: 10px 25px;
    border-radius: 50px;
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.2);
    transition: all 0.3s ease;
  }
  
  .slide.active .slide-title {
    animation: titleFadeIn 0.8s ease;
  }
  
  .slide img {
    max-width: 100%;
    max-height: 90%;
    object-fit: contain;
    filter: drop-shadow(0 10px 30px rgba(0, 0, 0, 0.5));
    transition: transform 0.4s ease;
  }
  
  .slide:hover img {
    transform: scale(1.05);
  }
  
  .slide:hover .slide-title {
    background: rgba(0, 0, 0, 0.7);
    transform: translateY(-5px);
  }
  
  /* Slideshow navigation */
  .slideshow-nav {
    position: absolute;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    gap: 10px;
    z-index: 10;
  }
  
  .nav-dot {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.4);
    cursor: pointer;
    transition: all 0.3s ease;
    border: 2px solid transparent;
  }
  
  .nav-dot.active {
    background: #667eea;
    transform: scale(1.4);
    box-shadow: 0 0 15px rgba(102, 126, 234, 0.8);
  }
  
  .slideshow-arrow {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    background: rgba(255, 255, 255, 0.2);
    border: 1px solid rgba(255, 255, 255, 0.4);
    color: #ffffff;
    width: 50px;
    height: 50px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    font-size: 24px;
    transition: all 0.3s ease;
    z-index: 10;
  }
  
  .slideshow-arrow:hover {
    background: rgba(255, 255, 255, 0.3);
    transform: translateY(-50%) scale(1.1);
    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
  }
  
  .slideshow-arrow.prev { left: 20px; }
  .slideshow-arrow.next { right: 20px; }

  /* ===== IMPROVED PRODUCTS SECTION ===== */
  .products-section {
    padding: 80px 5%;
    position: relative;
    z-index: 2;
    background: rgba(10, 14, 23, 0.8);
    backdrop-filter: blur(10px);
    margin-bottom: 0;
  }
  
  .section-header {
    text-align: center;
    margin-bottom: 60px;
  }
  
  .section-title {
    font-size: 2.5rem;
    font-weight: 900;
    color: #ffffff;
    margin-bottom: 20px;
    text-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
  }
  
  .section-subtitle {
    font-size: 1.25rem;
    color: rgba(255, 255, 255, 0.8);
    max-width: 600px;
    margin: 0 auto;
  }
  
  /* Products grid */
  .products-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 30px;
    margin-top: 40px;
  }
  
  .product-card {
    background: rgba(255, 255, 255, 0.08);
    backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.15);
    border-radius: 20px;
    overflow: hidden;
    transition: all 0.3s ease;
    position: relative;
  }
  
  .product-card:hover {
    transform: translateY(-10px);
    border-color: rgba(102, 126, 234, 0.5);
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
  }
  
  .product-img-container {
    width: 100%;
    height: 220px;
    position: relative;
    overflow: hidden;
    background: rgba(0, 0, 0, 0.3);
  }
  
  .product-img-container img {
    width: 100%;
    height: 100%;
    object-fit: contain;
    padding: 20px;
    transition: transform 0.5s ease;
  }
  
  .product-card:hover .product-img-container img {
    transform: scale(1.1);
  }
  
  .product-badge {
    position: absolute;
    top: 15px;
    left: 15px;
    padding: 6px 12px;
    border-radius: 20px;
    font-size: 12px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 1px;
    z-index: 2;
    background: linear-gradient(135deg, #667eea, #764ba2);
    color: #ffffff;
  }
  
  .product-info {
    padding: 25px;
    color: #ffffff;
  }
  
  .product-code {
    font-size: 12px;
    color: rgba(255, 255, 255, 0.7);
    margin-bottom: 8px;
    font-family: 'Courier New', monospace;
  }
  
  .product-name {
    font-size: 1.25rem;
    font-weight: 700;
    margin-bottom: 15px;
    line-height: 1.3;
    color: #ffffff;
  }
  
  .product-price {
    font-size: 1.75rem;
    font-weight: 900;
    background: linear-gradient(135deg, #667eea, #02adfc);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin-bottom: 20px;
  }
  
  .product-actions {
    display: flex;
    gap: 10px;
  }
  
  .btn-add-to-cart {
    flex: 1;
    padding: 12px 24px;
    background: linear-gradient(135deg, #667eea, #764ba2);
    color: #ffffff;
    border: none;
    border-radius: 12px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
  }
  
  .btn-add-to-cart:hover:not(:disabled) {
    transform: translateY(-2px);
    box-shadow: 0 10px 20px rgba(102, 126, 234, 0.4);
  }
  
  .btn-add-to-cart:disabled {
    background: linear-gradient(135deg, #6b7280, #4b5563);
    cursor: not-allowed;
    opacity: 0.6;
  }
  
  .btn-view-details {
    padding: 12px 20px;
    background: rgba(255, 255, 255, 0.1);
    color: #ffffff;
    border: 1px solid rgba(255, 255, 255, 0.3);
    border-radius: 12px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
  }
  
  .btn-view-details:hover {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.5);
  }

  /* ===== IMPROVED STATS SECTION ===== */
  .stats-section {
    padding: 80px 5%;
    position: relative;
    z-index: 2;
    background: rgba(0, 0, 0, 0.4);
    backdrop-filter: blur(20px);
    margin-bottom: 0;
  }
  
  .stats-grid {
    max-width: 1400px;
    margin: 0 auto;
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 30px;
  }
  
  .stat-card {
    background: rgba(255, 255, 255, 0.08);
    backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.15);
    border-radius: 20px;
    padding: 40px 30px;
    text-align: center;
    transition: all 0.3s ease;
    color: #ffffff;
  }
  
  .stat-card:hover {
    transform: translateY(-10px);
    border-color: rgba(102, 126, 234, 0.5);
    background: rgba(255, 255, 255, 0.12);
  }
  
  .stat-number {
    font-size: 3rem;
    font-weight: 900;
    background: linear-gradient(135deg, #667eea, #02adfc);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin-bottom: 10px;
    display: block;
  }
  
  .stat-label {
    font-size: 16px;
    font-weight: 600;
    opacity: 0.9;
    text-transform: uppercase;
    letter-spacing: 1.5px;
    color: rgba(255, 255, 255, 0.9);
  }

  /* ===== FEATURES SECTION ===== */
  .features-section {
    padding: 80px 5%;
    position: relative;
    z-index: 2;
    background: rgba(10, 14, 23, 0.9);
    margin-bottom: 0;
  }
  
  .features-grid {
    max-width: 1400px;
    margin: 0 auto;
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 30px;
  }
  
  .feature-card {
    background: rgba(255, 255, 255, 0.05);
    backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 20px;
    padding: 40px 30px;
    text-align: center;
    transition: all 0.3s ease;
    color: #ffffff;
  }
  
  .feature-card:hover {
    transform: translateY(-10px);
    border-color: rgba(102, 126, 234, 0.5);
    background: rgba(255, 255, 255, 0.1);
  }
  
  .feature-icon {
    font-size: 3rem;
    margin-bottom: 20px;
    display: block;
  }
  
  .feature-title {
    font-size: 1.5rem;
    font-weight: 700;
    margin-bottom: 15px;
    color: #ffffff;
  }
  
  .feature-description {
    opacity: 0.8;
    line-height: 1.6;
    color: rgba(255, 255, 255, 0.9);
  }

  /* ===== MARQUEE FIX ===== */
  .marquee-container {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    overflow: hidden;
    background: rgba(0, 0, 0, 0.7);
    backdrop-filter: blur(10px);
    border-top: 1px solid rgba(255, 255, 255, 0.2);
    border-bottom: 1px solid rgba(255, 255, 255, 0.2);
    padding: 15px 0;
    z-index: 5;
  }
  
  .marquee {
    display: flex;
    animation: scroll 30s linear infinite;
    white-space: nowrap;
  }
  
  .marquee-content {
    display: flex;
    align-items: center;
    gap: 50px;
    padding-right: 50px;
  }
  
  .marquee-item {
    display: flex;
    align-items: center;
    gap: 12px;
    font-size: 16px;
    font-weight: 600;
    color: #ffffff;
    text-transform: uppercase;
    letter-spacing: 1px;
  }
  
  .marquee-icon {
    font-size: 24px;
    animation: iconBounce 2s ease-in-out infinite;
  }

  /* ===== ANIMATIONS ===== */
  @keyframes fadeInUp {
    from { opacity: 0; transform: translateY(40px); }
    to { opacity: 1; transform: translateY(0); }
  }
  
  @keyframes fadeInRight {
    from { opacity: 0; transform: translateX(60px); }
    to { opacity: 1; transform: translateX(0); }
  }
  
  @keyframes titleFadeIn {
    from { opacity: 0; transform: translateY(-20px); }
    to { opacity: 1; transform: translateY(0); }
  }
  
  @keyframes shimmer {
    0%, 100% { filter: brightness(1) hue-rotate(0deg); }
    50% { filter: brightness(1.2) hue-rotate(10deg); }
  }
  
  @keyframes gradientShift {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
  }
  
  @keyframes scroll {
    0% { transform: translateX(0); }
    100% { transform: translateX(-50%); }
  }
  
  @keyframes iconBounce {
    0%, 100% { transform: translateY(0) scale(1); }
    50% { transform: translateY(-8px) scale(1.05); }
  }

  /* ===== RESPONSIVE FIXES ===== */
  @media (max-width: 1024px) {
    .hero-grid {
      grid-template-columns: 1fr;
      gap: 40px;
      text-align: center;
    }
    
    .hero-slideshow {
      order: -1;
      height: 450px;
    }
    
    .hero-text-slideshow {
      min-height: 220px;
    }
    
    .hero-subtitle {
      margin: 0 auto 15px;
    }
    
    .hero-buttons {
      justify-content: center;
    }
    
    .text-slideshow-nav {
      justify-content: center;
    }
  }
  
  @media (max-width: 768px) {
    .hero {
      min-height: 80vh;
      padding: 60px 5%;
    }
    
    .hero-title {
      font-size: 2rem;
      min-height: 110px;
    }
    
    .hero-text-slideshow {
      height: 200px;
    }
    
    .hero-slideshow {
      height: 400px;
    }
    
    .slide-title {
      font-size: 1.25rem;
      padding: 8px 20px;
    }
    
    .section-title {
      font-size: 2rem;
    }
    
    .stats-grid,
    .features-grid,
    .products-grid {
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
    }
    
    .product-card {
      min-width: unset;
    }
  }
  
  @media (max-width: 480px) {
    .hero {
      min-height: 70vh;
      padding: 40px 5%;
    }
    
    .hero-title {
      font-size: 1.75rem;
      min-height: 100px;
    }
    
    .hero-text-slideshow {
      height: 180px;
    }
    
    .hero-slideshow {
      height: 350px;
    }
    
    .slide-title {
      font-size: 1rem;
      padding: 6px 15px;
    }
    
    .hero-buttons {
      flex-direction: column;
    }
    
    .btn {
      width: 100%;
      justify-content: center;
    }
    
    .products-grid {
      grid-template-columns: 1fr;
    }
  }

  /* ===== SCROLL INDICATOR ===== */
  .scroll-indicator {
    position: absolute;
    bottom: 100px;
    left: 50%;
    transform: translateX(-50%);
    width: 30px;
    height: 50px;
    border: 2px solid rgba(255, 255, 255, 0.6);
    border-radius: 15px;
    display: flex;
    align-items: flex-start;
    justify-content: center;
    padding-top: 8px;
    cursor: pointer;
    animation: bounce 2.5s infinite;
    transition: all 0.3s ease;
    z-index: 4;
  }
  
  .scroll-indicator:hover {
    border-color: #667eea;
    transform: translateX(-50%) scale(1.1);
  }
  
  .scroll-indicator::after {
    content: '';
    display: block;
    width: 4px;
    height: 4px;
    background: #667eea;
    border-radius: 50%;
    animation: scrollDown 2.5s infinite;
  }

  /* Best Selling Section Styles */
  .best-selling-section {
    padding: 100px 5%;
    position: relative;
    z-index: 2;
    background: linear-gradient(135deg, rgba(10, 14, 23, 0.95) 0%, rgba(15, 23, 42, 0.98) 100%);
    backdrop-filter: blur(20px);
    margin-bottom: 0;
  }

  .section-header {
    text-align: center;
    margin-bottom: 50px;
  }

  .section-title {
    font-size: 3rem;
    font-weight: 900;
    color: #ffffff;
    margin-bottom: 15px;
    text-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 15px;
  }

  .title-icon {
    animation: fireAnimation 2s ease-in-out infinite;
  }

  @keyframes fireAnimation {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.2); }
  }

  .section-subtitle {
    font-size: 1.25rem;
    color: rgba(255, 255, 255, 0.8);
    max-width: 600px;
    margin: 0 auto;
  }

  /* Sales Performance */
  .sales-performance {
    margin-bottom: 40px;
  }

  .performance-cards {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 20px;
    max-width: 800px;
    margin: 0 auto;
  }

  .performance-card {
    background: rgba(255, 255, 255, 0.08);
    backdrop-filter: blur(20px);
    border: 1px solid rgba(102, 126, 234, 0.3);
    border-radius: 15px;
    padding: 25px;
    display: flex;
    align-items: center;
    gap: 20px;
    transition: all 0.3s ease;
    cursor: pointer;
  }

  .performance-card:hover {
    transform: translateY(-5px);
    border-color: rgba(102, 126, 234, 0.6);
    background: rgba(255, 255, 255, 0.12);
    box-shadow: 0 15px 40px rgba(102, 126, 234, 0.2);
  }

  .performance-icon {
    font-size: 2.5rem;
    animation: floatAnimation 3s ease-in-out infinite;
  }

  @keyframes floatAnimation {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-10px); }
  }

  .performance-info {
    flex: 1;
  }

  .performance-value {
    font-size: 2.2rem;
    font-weight: 900;
    background: linear-gradient(135deg, #667eea, #02adfc);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin-bottom: 5px;
  }

  .performance-label {
    font-size: 14px;
    color: rgba(255, 255, 255, 0.8);
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 1px;
  }

  /* Category Filters */
  .category-filters {
    margin-bottom: 40px;
    overflow-x: auto;
    padding-bottom: 10px;
  }

  .category-filters::-webkit-scrollbar {
    height: 4px;
  }

  .category-filters::-webkit-scrollbar-track {
    background: rgba(255, 255, 255, 0.1);
    border-radius: 2px;
  }

  .category-filters::-webkit-scrollbar-thumb {
    background: #667eea;
    border-radius: 2px;
  }

  .filters-container {
    display: flex;
    gap: 12px;
    justify-content: center;
    min-width: fit-content;
    padding: 0 20px;
  }

  .filter-btn {
    padding: 12px 24px;
    background: rgba(255, 255, 255, 0.08);
    border: 2px solid rgba(255, 255, 255, 0.2);
    border-radius: 50px;
    color: rgba(255, 255, 255, 0.8);
    font-weight: 600;
    font-size: 14px;
    cursor: pointer;
    transition: all 0.3s ease;
    white-space: nowrap;
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .filter-btn:hover {
    background: rgba(255, 255, 255, 0.15);
    border-color: rgba(255, 255, 255, 0.4);
    transform: translateY(-2px);
  }

  .filter-btn.active {
    background: linear-gradient(135deg, #667eea, #764ba2);
    border-color: transparent;
    color: white;
    box-shadow: 0 8px 20px rgba(102, 126, 234, 0.4);
  }

  /* Best Selling Grid */
  .best-selling-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
    gap: 30px;
    margin-bottom: 50px;
  }

  .best-selling-card {
    background: rgba(255, 255, 255, 0.08);
    backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.15);
    border-radius: 20px;
    overflow: hidden;
    transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    position: relative;
  }

  .best-selling-card:hover {
    transform: translateY(-15px);
    border-color: rgba(102, 126, 234, 0.6);
    box-shadow: 0 25px 50px rgba(0, 0, 0, 0.4);
  }

  .product-rank {
    position: absolute;
    top: 15px;
    left: 15px;
    display: flex;
    align-items: center;
    gap: 10px;
    z-index: 10;
  }

  .rank-number {
    background: linear-gradient(135deg, #667eea, #764ba2);
    color: white;
    width: 36px;
    height: 36px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 900;
    font-size: 16px;
    box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
  }

  .rank-badge {
    background: rgba(0, 0, 0, 0.8);
    color: #ffd700;
    padding: 6px 12px;
    border-radius: 20px;
    font-size: 11px;
    font-weight: 700;
    letter-spacing: 1px;
    text-transform: uppercase;
    border: 1px solid rgba(255, 215, 0, 0.3);
  }

  /* Product Image */
  .product-image-container {
    position: relative;
    width: 100%;
    height: 240px;
    overflow: hidden;
    background: linear-gradient(135deg, rgba(20, 30, 48, 0.9), rgba(36, 59, 85, 0.9));
  }

  .image-overlay {
    position: absolute;
    inset: 0;
    background: rgba(0, 0, 0, 0.7);
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    transition: opacity 0.3s ease;
    z-index: 2;
  }

  .best-selling-card:hover .image-overlay {
    opacity: 1;
  }

  .view-quick {
    color: white;
    font-weight: 600;
    font-size: 14px;
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 10px 20px;
    background: rgba(102, 126, 234, 0.9);
    border-radius: 25px;
  }

  .product-image {
    width: 100%;
    height: 100%;
    object-fit: contain;
    padding: 40px;
    transition: transform 0.5s ease;
  }

  .best-selling-card:hover .product-image {
    transform: scale(1.1);
  }

  .image-placeholder {
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .placeholder-icon {
    font-size: 4rem;
    opacity: 0.5;
  }

  /* Product Content */
  .product-content {
    padding: 25px;
  }

  .product-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 15px;
  }

  .product-sku {
    font-size: 12px;
    color: rgba(255, 255, 255, 0.7);
    font-family: 'Courier New', monospace;
  }

  .stock-status {
    padding: 4px 12px;
    border-radius: 15px;
    font-size: 11px;
    font-weight: 700;
    letter-spacing: 1px;
  }

  .stock-status.available {
    background: rgba(16, 185, 129, 0.2);
    color: #10b981;
    border: 1px solid rgba(16, 185, 129, 0.3);
  }

  .stock-status.lowstock {
    background: rgba(245, 158, 11, 0.2);
    color: #f59e0b;
    border: 1px solid rgba(245, 158, 11, 0.3);
  }

  .stock-status.outstock {
    background: rgba(239, 68, 68, 0.2);
    color: #ef4444;
    border: 1px solid rgba(239, 68, 68, 0.3);
  }

  .product-title {
    font-size: 1.4rem;
    font-weight: 700;
    color: #ffffff;
    margin-bottom: 12px;
    line-height: 1.3;
    min-height: 3.5em;
    overflow: hidden;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    /* Modern browsers */
    display: -webkit-flex;
    display: -ms-flexbox;
    line-clamp: 2;
    box-orient: vertical;
  }
  /* Product Rating */
  .product-rating {
    margin-bottom: 15px;
  }

  .stars {
    display: flex;
    align-items: center;
    gap: 5px;
  }

  .star {
    color: #ffd700;
    font-size: 16px;
  }

  .rating-value {
    margin-left: 8px;
    font-weight: 700;
    color: #ffffff;
    font-size: 14px;
  }

  .rating-count {
    color: rgba(255, 255, 255, 0.7);
    font-size: 13px;
  }

  /* Price Section - FIXED */
  .product-price-section {
    margin-bottom: 20px;
  }

  .price-current {
    font-size: 2rem;
    font-weight: 900;
    background: linear-gradient(135deg, #667eea, #02adfc);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin-bottom: 5px;
  }

  .price-original {
    font-size: 1.2rem;
    color: rgba(255, 255, 255, 0.5);
    text-decoration: line-through;
    margin-bottom: 8px;
  }

  .price-save {
    margin-top: 8px;
  }

  .save-badge {
    background: linear-gradient(135deg, #f093fb, #f5576c);
    color: white;
    padding: 4px 12px;
    border-radius: 15px;
    font-size: 12px;
    font-weight: 700;
  }

  /* Sales Progress - FIXED */
  .sales-progress {
    margin-bottom: 20px;
  }

  .progress-label {
    display: flex;
    justify-content: space-between;
    font-size: 12px;
    color: rgba(255, 255, 255, 0.8);
    margin-bottom: 8px;
  }

  .progress-bar {
    width: 100%;
    height: 6px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 3px;
    overflow: hidden;
  }

  .progress-fill {
    height: 100%;
    background: linear-gradient(90deg, #667eea, #764ba2);
    border-radius: 3px;
  }

  /* Action Buttons */
  .product-actions {
    display: flex;
    gap: 10px;
    margin-bottom: 20px;
  }

  .action-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    border: none;
    border-radius: 12px;
    cursor: pointer;
    transition: all 0.3s ease;
    font-weight: 600;
  }

  .add-cart-btn {
    flex: 1;
    padding: 14px;
    background: linear-gradient(135deg, #667eea, #764ba2);
    color: white;
    gap: 10px;
  }

  .add-cart-btn:hover:not(:disabled) {
    transform: translateY(-2px);
    box-shadow: 0 10px 20px rgba(102, 126, 234, 0.4);
  }

  .wishlist-btn,
  .compare-btn {
    width: 50px;
    height: 50px;
    background: rgba(255, 255, 255, 0.1);
    color: rgba(255, 255, 255, 0.8);
    border: 1px solid rgba(255, 255, 255, 0.2);
  }

  .wishlist-btn:hover,
  .compare-btn:hover {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.4);
    transform: translateY(-2px);
  }

  .outstock-btn {
    flex: 1;
    padding: 14px;
    background: rgba(255, 255, 255, 0.1);
    color: rgba(255, 255, 255, 0.6);
    gap: 10px;
    cursor: not-allowed;
  }

  .btn-icon {
    font-size: 18px;
  }

  .btn-text {
    font-size: 14px;
  }

  /* Quick Stats */
  .quick-stats {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 10px;
    padding-top: 20px;
    border-top: 1px solid rgba(255, 255, 255, 0.1);
  }

  .stat-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 5px;
    text-align: center;
  }

  .stat-icon {
    font-size: 20px;
    opacity: 0.8;
  }

  .stat-text {
    font-size: 11px;
    color: rgba(255, 255, 255, 0.7);
  }

  /* No Products */
  .no-products {
    grid-column: 1 / -1;
    text-align: center;
    padding: 80px 20px;
    color: rgba(255, 255, 255, 0.7);
  }

  .no-products-icon {
    font-size: 4rem;
    margin-bottom: 20px;
    opacity: 0.5;
  }

  .no-products h3 {
    font-size: 1.5rem;
    color: white;
    margin-bottom: 10px;
  }

  .no-products p {
    font-size: 1rem;
    opacity: 0.8;
  }

  /* View More Button */
  .view-more-container {
    text-align: center;
    margin-top: 40px;
  }

  .view-more-btn {
    display: inline-flex;
    align-items: center;
    gap: 15px;
    padding: 18px 40px;
    background: linear-gradient(135deg, #667eea, #764ba2);
    color: white;
    border-radius: 50px;
    text-decoration: none;
    font-weight: 700;
    font-size: 16px;
    transition: all 0.3s ease;
    border: 2px solid transparent;
  }

  .view-more-btn:hover {
    transform: translateY(-3px);
    box-shadow: 0 15px 40px rgba(102, 126, 234, 0.4);
    border-color: rgba(255, 255, 255, 0.2);
  }

  .arrow-icon {
    transition: transform 0.3s ease;
  }

  .view-more-btn:hover .arrow-icon {
    transform: translateX(5px);
  }

  /* Responsive */
  @media (max-width: 1024px) {
    .best-selling-grid {
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 25px;
    }
    
    .section-title {
      font-size: 2.5rem;
    }
  }

  @media (max-width: 768px) {
    .best-selling-section {
      padding: 60px 5%;
    }
    
    .section-title {
      font-size: 2rem;
    }
    
    .performance-cards {
      grid-template-columns: 1fr;
      gap: 15px;
    }
    
    .filters-container {
      justify-content: flex-start;
    }
    
    .product-image-container {
      height: 200px;
    }
    
    .quick-stats {
      grid-template-columns: 1fr;
      gap: 15px;
    }
  }

  @media (max-width: 480px) {
    .best-selling-grid {
      grid-template-columns: 1fr;
    }
    
    .section-title {
      font-size: 1.8rem;
    }
    
    .product-actions {
      flex-wrap: wrap;
    }
    
    .view-more-btn {
      width: 100%;
      justify-content: center;
    }
  }

  /* ===== FLOATING ACTION BUTTON ===== */
  .fab {
    position: fixed;
    bottom: 30px;
    right: 30px;
    width: 60px;
    height: 60px;
    background: linear-gradient(135deg, #667eea, #764ba2);
    border-radius: 50%;
    display: none;
    align-items: center;
    justify-content: center;
    color: #fff;
    font-size: 24px;
    cursor: pointer;
    box-shadow: 0 10px 30px rgba(102, 126, 234, 0.5);
    transition: all 0.3s ease;
    z-index: 1000;
  }
  
  .fab:hover {
    transform: scale(1.1);
    box-shadow: 0 15px 40px rgba(102, 126, 234, 0.7);
  }
  
  /* ===== TOAST NOTIFICATION ===== */
  .toast {
    position: fixed;
    bottom: 100px;
    right: 30px;
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(20px);
    padding: 15px 25px;
    border-radius: 12px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    color: #333;
    font-weight: 600;
    transform: translateX(400px);
    transition: transform 0.4s ease;
    z-index: 1001;
    border: 2px solid rgba(102, 126, 234, 0.3);
    max-width: 300px;
  }
  
  .toast.show {
    transform: translateX(0);
  }
  
  /* ===== CONTAINER FOR CENTERING ===== */
  .container {
    max-width: 1400px;
    margin: 0 auto;
    padding: 0 20px;
  }
</style>

<!-- Video Background -->
<div class="video-background">
  <video autoplay muted loop playsinline>
    <source src="{% static 'videos/SHOPVIEW.mp4' %}" type="video/mp4">
  </video>
</div>

<!-- Gradient Background -->
<div class="gradient-bg"></div>

<!-- Hero Section -->
<section class="hero" id="home">
  <div class="hero-content">
    <div class="hero-grid">
      <!-- MODIFIED: Text Side with Dynamic Slideshow -->
      <div class="hero-text">
        <div class="hero-badge">
          <span>‚ö°</span>
          <span>BEST PRICES GUARANTEED</span>
        </div>
        
        <!-- Dynamic Text Slideshow Container -->
        <div class="hero-text-slideshow">
          <!-- Slide 1 -->
          <div class="text-slide active">
            <h1 class="hero-title">
              PREMIUM TECH<br>
              <span class="highlight">AMAZING PRICES</span>
            </h1>
            <p class="hero-subtitle">
              Discover the latest smartphones, accessories, and cutting-edge gadgets at unbeatable prices. 
              Shop with confidence and enjoy exclusive deals on premium brands.
            </p>
          </div>
          
          <!-- Slide 2 -->
          <div class="text-slide">
            <h1 class="hero-title">
              LATEST<br>
              <span class="highlight-2">SMARTPHONES</span>
            </h1>
            <p class="hero-subtitle">
              Get the newest smartphone models from top brands like Samsung, Tecno, and more.
              Experience cutting-edge technology at prices that will surprise you.
            </p>
          </div>
          
          <!-- Slide 3 -->
          <div class="text-slide">
            <h1 class="hero-title">
              QUALITY<br>
              <span class="highlight-3">ACCESSORIES</span>
            </h1>
            <p class="hero-subtitle">
              Premium headphones, fast chargers, smartwatches and more. 
              Enhance your devices with our carefully curated selection of accessories.
            </p>
          </div>
          
          <!-- Slide 4 -->
          <div class="text-slide">
            <h1 class="hero-title">
              EXPERT<br>
              <span class="highlight">REPAIR SERVICES</span>
            </h1>
            <p class="hero-subtitle">
              Professional phone and electronic repairs with warranty. 
              Trust our certified technicians to bring your devices back to life.
            </p>
          </div>
        </div>
        
        <!-- Text Slideshow Navigation -->
        <div class="text-slideshow-nav">
          <span class="text-nav-dot active" onclick="goToTextSlide(0)"></span>
          <span class="text-nav-dot" onclick="goToTextSlide(1)"></span>
          <span class="text-nav-dot" onclick="goToTextSlide(2)"></span>
          <span class="text-nav-dot" onclick="goToTextSlide(3)"></span>
        </div>
        
        <div class="hero-buttons">
          <a href="{% url 'shop' %}" class="btn btn-primary">
            <span>üõçÔ∏è</span>
            <span>SHOP NOW</span>
          </a>
          <a href="#featured-products" class="btn btn-secondary">
            <span>üî•</span>
            <span>VIEW DEALS</span>
          </a>
        </div>
      </div>
      
      <!-- Image Slideshow -->
      <div class="hero-slideshow">
        <div class="slideshow-container" id="slideshow">
          <div class="slide active">
            <div class="slide-title">PROFESSION PHONE $ ELECTRONIC REPAIRS</div>
            <img src="{% static 'images/REPAIRS.png' %}" alt="Phone and Electronic Repairs" loading="lazy">
          </div>
          <div class="slide">
            <div class="slide-title">TECNO PHANTOM SERIES</div>
            <img src="{% static 'images/PHANTOM.png' %}" alt="Tecno Smartphone" loading="lazy">
          </div>
          <div class="slide">
            <div class="slide-title">QUALITY PREMIUM EARPODS</div>
            <img src="{% static 'images/EARPODS.png' %}" alt="U$I Earpods" loading="lazy">
          </div>
          <div class="slide">
            <div class="slide-title">SUPPER FAST CHARGERS</div>
            <img src="{% static 'images/CHARGER.webp' %}" alt="Oraimo Device" loading="lazy">
          </div>
          <div class="slide">
            <div class="slide-title">BEST SAMSUNG SMARTPHONES</div>
            <img src="{% static 'images/SAMSUNG.png' %}" alt="Samsung Device" loading="lazy">
          </div>
        </div>
        <div class="slideshow-arrow prev" onclick="changeSlide(-1)">‚ùÆ</div>
        <div class="slideshow-arrow next" onclick="changeSlide(1)">‚ùØ</div>
        <div class="slideshow-nav">
          <span class="nav-dot active" onclick="goToSlide(0)"></span>
          <span class="nav-dot" onclick="goToSlide(1)"></span>
          <span class="nav-dot" onclick="goToSlide(2)"></span>
          <span class="nav-dot" onclick="goToSlide(3)"></span>
          <span class="nav-dot" onclick="goToSlide(4)"></span>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Scroll Indicator -->
  <div class="scroll-indicator" onclick="document.getElementById('stats').scrollIntoView({behavior: 'smooth'})"></div>
  
  <!-- Marquee -->
  <div class="marquee-container">
    <div class="marquee">
      <div class="marquee-content">
        <div class="marquee-item"><span class="marquee-icon">üì±</span><span>SMARTPHONES</span></div>
        <div class="marquee-item"><span class="marquee-icon">üéß</span><span>HEADPHONES</span></div>
        <div class="marquee-item"><span class="marquee-icon">‚åö</span><span>SMARTWATCHES</span></div>
        <div class="marquee-item"><span class="marquee-icon">üíª</span><span>LAPTOPS</span></div>
        <div class="marquee-item"><span class="marquee-icon">üì∑</span><span>CAMERAS</span></div>
        <div class="marquee-item"><span class="marquee-icon">üéÆ</span><span>GAMING</span></div>
      </div>
      <div class="marquee-content" aria-hidden="true">
        <div class="marquee-item"><span class="marquee-icon">üì±</span><span>SMARTPHONES</span></div>
        <div class="marquee-item"><span class="marquee-icon">üéß</span><span>HEADPHONES</span></div>
        <div class="marquee-item"><span class="marquee-icon">‚åö</span><span>SMARTPHONES</span></div>
        <div class="marquee-item"><span class="marquee-icon">üíª</span><span>LAPTOPS</span></div>
        <div class="marquee-item"><span class="marquee-icon">üì∑</span><span>CAMERAS</span></div>
        <div class="marquee-item"><span class="marquee-icon">üéÆ</span><span>GAMING</span></div>
      </div>
    </div>
  </div>
</section>

<!-- Stats Section -->
<section class="stats-section" id="stats">
  <div class="container">
    <div class="stats-grid">
      <div class="stat-card">
        <span class="stat-number" data-target="1000">0+</span>
        <span class="stat-label">Products</span>
      </div>
      <div class="stat-card">
        <span class="stat-number" data-target="50000">0+</span>
        <span class="stat-label">Customers</span>
      </div>
      <div class="stat-card">
        <span class="stat-number" data-target="99">99%</span>
        <span class="stat-label">Satisfaction</span>
      </div>
      <div class="stat-card">
        <span class="stat-number">24/7</span>
        <span class="stat-label">Support</span>
      </div>
    </div>
  </div>
</section>

<!-- Best Selling Items Section -->
<section class="best-selling-section" id="best-selling">
  <div class="container">
    <div class="section-header">
      <h2 class="section-title">
        <span class="title-icon">üî•</span>
        BEST SELLING ITEMS
      </h2>
      <p class="section-subtitle">Top picks from our valued customers</p>
    </div>
    
    <!-- Sales Performance Stats -->
    <div class="sales-performance">
      <div class="performance-cards">
        <div class="performance-card">
          <div class="performance-icon">üìà</div>
          <div class="performance-info">
            <div class="performance-value">98%</div>
            <div class="performance-label">Satisfaction Rate</div>
          </div>
        </div>
        <div class="performance-card">
          <div class="performance-icon">üîÑ</div>
          <div class="performance-info">
            <div class="performance-value">2.5K+</div>
            <div class="performance-label">Monthly Sales</div>
          </div>
        </div>
        <div class="performance-card">
          <div class="performance-icon">‚≠ê</div>
          <div class="performance-info">
            <div class="performance-value">4.9</div>
            <div class="performance-label">Average Rating</div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Category Filters -->
    <div class="category-filters">
      <div class="filters-container">
        <button class="filter-btn active" data-category="all">All Products</button>
        <button class="filter-btn" data-category="smartphones">üì± Smartphones</button>
        <button class="filter-btn" data-category="accessories">üéß Accessories</button>
        <button class="filter-btn" data-category="watches">‚åö Smartwatches</button>
        <button class="filter-btn" data-category="chargers">üîå Chargers</button>
      </div>
    </div>
    
    <!-- Products Grid with Advanced Layout -->
    <div class="best-selling-grid">
      {% if featured_products %}
        {% for product in featured_products %}
          <div class="best-selling-card" data-category="{{ product.category|lower|default:'all' }}">
            <!-- Product Badge -->
            <div class="product-rank">
              <span class="rank-number">#{{ forloop.counter }}</span>
              <span class="rank-badge">BEST SELLER</span>
            </div>
            
            <!-- Product Image -->
            <div class="product-image-container">
              <div class="image-overlay">
                <span class="view-quick">üëÅÔ∏è QUICK VIEW</span>
              </div>
              {% if product.image %}
                <img src="{{ product.image.url }}" alt="{{ product.name }}" loading="lazy" class="product-image">
              {% else %}
                <div class="image-placeholder">
                  <span class="placeholder-icon">üì±</span>
                </div>
              {% endif %}
            </div>
            
            <!-- Product Info -->
            <div class="product-content">
              <div class="product-header">
                <!-- FIXED: Proper SKU display -->
                <div class="product-sku">SKU: {{ product.product_code|default:"FMX-" }}{{ forloop.counter|add:1000 }}</div>
                {% if product.status == 'available' %}
                  <div class="stock-status available">In Stock</div>
                {% elif product.status == 'lowstock' %}
                  <div class="stock-status lowstock">Low Stock</div>
                {% else %}
                  <div class="stock-status outstock">Out of Stock</div>
                {% endif %}
              </div>
              
              <h3 class="product-title">{{ product.name }}</h3>
              
              <div class="product-rating">
                <div class="stars">
                  <span class="star">‚≠ê</span>
                  <span class="star">‚≠ê</span>
                  <span class="star">‚≠ê</span>
                  <span class="star">‚≠ê</span>
                  <span class="star">‚≠ê</span>
                  <span class="rating-value">4.8</span>
                  <span class="rating-count">({{ forloop.counter|add:150 }})</span>
                </div>
              </div>
              
              <!-- FIXED: Price section without custom filters -->
              <div class="product-price-section">
                <div class="price-current">KSh {{ product.selling_price|floatformat:0 }}</div>
                {% if product.old_price and product.old_price > product.selling_price %}
                  <div class="price-original">KSh {{ product.old_price|floatformat:0 }}</div>
                  <div class="price-save">
                    <!-- Simple badge without calculations -->
                    <span class="save-badge">HOT DEAL</span>
                  </div>
                {% endif %}
              </div>
              
              <!-- Sales Progress - FIXED -->
              <div class="sales-progress">
                <div class="progress-label">
                  <span>Sold: {{ forloop.counter|add:80 }} items</span>
                  <span>{{ forloop.counter|add:20 }} left</span>
                </div>
                <div class="progress-bar">
                  <div class="progress-fill"></div>
                </div>
              </div>
              
              <!-- Action Buttons -->
              <div class="product-actions">
                {% if product.status == 'available' or product.status == 'lowstock' %}
                  <button class="action-btn add-cart-btn"
                          data-product-id="{{ product.id }}"
                          data-product-name="{{ product.name }}"
                          data-product-price="{{ product.selling_price }}">
                    <span class="btn-icon">üõí</span>
                    <span class="btn-text">ADD TO CART</span>
                  </button>
                  <button class="action-btn wishlist-btn" title="Add to Wishlist">
                    <span class="btn-icon">‚ù§Ô∏è</span>
                  </button>
                  <button class="action-btn compare-btn" title="Compare">
                    <span class="btn-icon">‚öñÔ∏è</span>
                  </button>
                {% else %}
                  <button class="action-btn outstock-btn" disabled>
                    <span class="btn-icon">‚è≥</span>
                    <span class="btn-text">NOTIFY ME</span>
                  </button>
                {% endif %}
              </div>
              
              <!-- Quick Stats -->
              <div class="quick-stats">
                <div class="stat-item">
                  <span class="stat-icon">üöö</span>
                  <span class="stat-text">Free Shipping</span>
                </div>
                <div class="stat-item">
                  <span class="stat-icon">üîÑ</span>
                  <span class="stat-text">30-Day Returns</span>
                </div>
                <div class="stat-item">
                  <span class="stat-icon">üîí</span>
                  <span class="stat-text">2-Year Warranty</span>
                </div>
              </div>
            </div>
          </div>
        {% endfor %}
      {% else %}
        <div class="no-products">
          <div class="no-products-icon">üì±</div>
          <h3>No Featured Products Available</h3>
          <p>Check back soon for our latest best sellers!</p>
        </div>
      {% endif %}
    </div>
    
    <!-- View More Button -->
    <div class="view-more-container">
      <a href="{% url 'shop' %}" class="view-more-btn">
        <span>VIEW ALL PRODUCTS</span>
        <span class="arrow-icon">‚Üí</span>
      </a>
    </div>
  </div>
</section>

<!-- Features Section -->
<section class="features-section">
  <div class="container">
    <div class="section-header">
      <h2 class="section-title">WHY CHOOSE FIELDMAX</h2>
      <p class="section-subtitle">Experience premium shopping with unbeatable benefits</p>
    </div>
    
    <div class="features-grid">
      <div class="feature-card">
        <span class="feature-icon">üöö</span>
        <h3 class="feature-title">Fast Delivery</h3>
        <p class="feature-description">Same day delivery in major cities, nationwide shipping</p>
      </div>
      <div class="feature-card">
        <span class="feature-icon">üîí</span>
        <h3 class="feature-title">Secure Payment</h3>
        <p class="feature-description">100% secure payment with multiple payment options</p>
      </div>
      <div class="feature-card">
        <span class="feature-icon">üîÑ</span>
        <h3 class="feature-title">Easy Returns</h3>
        <p class="feature-description">14-day return policy on all products</p>
      </div>
      <div class="feature-card">
        <span class="feature-icon">üìû</span>
        <h3 class="feature-title">24/7 Support</h3>
        <p class="feature-description">Round-the-clock customer support available</p>
      </div>
    </div>
  </div>
</section>

<!-- Back to Top Button -->
<div class="fab" id="backToTop" onclick="window.scrollTo({top: 0, behavior: 'smooth'})" title="Back to Top">‚Üë</div>

<!-- Toast Notification -->
<div class="toast" id="toast">
  <span id="toastMessage"></span>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Initialize slideshows
    initImageSlideshow();
    initTextSlideshow();
    
    // Initialize counters
    initCounters();
    
    // Initialize back to top button
    initBackToTop();
    
    // Initialize add to cart
    initAddToCart();
    
    // Initialize Best Selling Section
    initProductFilters();
    initBestSellingAddToCart();
    
    // Initialize progress bars
    initProgressBars();
  });

  function initImageSlideshow() {
    const slides = document.querySelectorAll('.slide');
    const dots = document.querySelectorAll('.nav-dot');
    let currentSlide = 0;
    
    function showSlide(n) {
      slides[currentSlide].classList.remove('active');
      dots[currentSlide].classList.remove('active');
      
      currentSlide = (n + slides.length) % slides.length;
      
      slides[currentSlide].classList.add('active');
      dots[currentSlide].classList.add('active');
    }
    
    function nextSlide() {
      showSlide(currentSlide + 1);
    }
    
    // Auto slide every 5 seconds
    const imageInterval = setInterval(nextSlide, 5000);
    
    // Make functions available globally
    window.changeSlide = function(n) {
      clearInterval(imageInterval);
      showSlide(currentSlide + n);
    };
    
    window.goToSlide = function(n) {
      clearInterval(imageInterval);
      showSlide(n);
    };
  }

  function initTextSlideshow() {
    const textSlides = document.querySelectorAll('.text-slide');
    const textDots = document.querySelectorAll('.text-nav-dot');
    let currentTextSlide = 0;
    let textInterval;
    
    function showTextSlide(n) {
      textSlides[currentTextSlide].classList.remove('active');
      textDots[currentTextSlide].classList.remove('active');
      
      currentTextSlide = (n + textSlides.length) % textSlides.length;
      
      textSlides[currentTextSlide].classList.add('active');
      textDots[currentTextSlide].classList.add('active');
    }
    
    function nextTextSlide() {
      showTextSlide(currentTextSlide + 1);
    }
    
    // Auto slide every 4 seconds
    textInterval = setInterval(nextTextSlide, 4000);
    
    // Make function available globally
    window.goToTextSlide = function(n) {
      clearInterval(textInterval);
      showTextSlide(n);
      // Restart interval
      textInterval = setInterval(nextTextSlide, 4000);
    };
  }

  function initCounters() {
    const counters = document.querySelectorAll('[data-target]');
    
    counters.forEach(counter => {
      const target = parseInt(counter.dataset.target);
      const suffix = counter.textContent.includes('%') ? '%' : '+';
      let current = 0;
      const increment = target / 100;
      
      const updateCounter = () => {
        if (current < target) {
          current += increment;
          counter.textContent = Math.ceil(current) + suffix;
          setTimeout(updateCounter, 20);
        } else {
          counter.textContent = target + suffix;
        }
      };
      
      // Start counter when in view
      const observer = new IntersectionObserver((entries) => {
        if (entries[0].isIntersecting) {
          updateCounter();
          observer.unobserve(counter);
        }
      });
      
      observer.observe(counter);
    });
  }

  function initProgressBars() {
    // Initialize progress bars for product cards
    const progressBars = document.querySelectorAll('.progress-fill');
    progressBars.forEach((bar, index) => {
      // Set different widths for visual variety
      const widths = [85, 92, 78, 95, 88, 82, 90, 87];
      const width = widths[index] || 85;
      bar.style.width = width + '%';
    });
  }

  function initBackToTop() {
    const button = document.getElementById('backToTop');
    
    window.addEventListener('scroll', () => {
      if (window.scrollY > 500) {
        button.style.display = 'flex';
      } else {
        button.style.display = 'none';
      }
    });
  }

  function initAddToCart() {
    document.querySelectorAll('.btn-add-to-cart:not(:disabled)').forEach(button => {
      button.addEventListener('click', function() {
        const productId = this.dataset.productId;
        const productName = this.dataset.productName;
        const productPrice = this.dataset.productPrice;
        
        // Get existing cart
        let cart = JSON.parse(localStorage.getItem('fieldmax_cart') || '[]');
        
        // Check if product exists
        const existingIndex = cart.findIndex(item => item.id === productId);
        
        if (existingIndex > -1) {
          cart[existingIndex].quantity += 1;
          cart[existingIndex].subtotal = cart[existingIndex].quantity * cart[existingIndex].price;
        } else {
          cart.push({
            id: productId,
            name: productName,
            price: parseFloat(productPrice),
            quantity: 1,
            subtotal: parseFloat(productPrice)
          });
        }
        
        // Save to localStorage
        localStorage.setItem('fieldmax_cart', JSON.stringify(cart));
        
        // Show toast
        showToast(`‚úÖ ${productName} added to cart`);
        
        // Visual feedback
        const originalText = this.innerHTML;
        this.innerHTML = '<span>‚úÖ ADDED!</span>';
        this.style.background = 'linear-gradient(135deg, #10b981, #059669)';
        
        setTimeout(() => {
          this.innerHTML = originalText;
          this.style.background = '';
        }, 2000);
        
        // Dispatch event for cart updates
        window.dispatchEvent(new CustomEvent('cartUpdated'));
      });
    });
  }

  function initProductFilters() {
    const filterBtns = document.querySelectorAll('.filter-btn');
    const productCards = document.querySelectorAll('.best-selling-card');

    filterBtns.forEach(btn => {
      btn.addEventListener('click', function() {
        // Remove active class from all buttons
        filterBtns.forEach(b => b.classList.remove('active'));
        
        // Add active class to clicked button
        this.classList.add('active');
        
        const category = this.dataset.category;
        
        // Filter products
        productCards.forEach(card => {
          if (category === 'all' || card.dataset.category === category) {
            card.style.display = 'block';
            setTimeout(() => {
              card.style.opacity = '1';
              card.style.transform = 'translateY(0)';
            }, 50);
          } else {
            card.style.opacity = '0';
            card.style.transform = 'translateY(20px)';
            setTimeout(() => {
              card.style.display = 'none';
            }, 300);
          }
        });
      });
    });
  }

  function initBestSellingAddToCart() {
    document.querySelectorAll('.add-cart-btn:not(:disabled)').forEach(button => {
      button.addEventListener('click', function() {
        const productId = this.dataset.productId;
        const productName = this.dataset.productName;
        const productPrice = this.dataset.productPrice;
        
        // Get existing cart
        let cart = JSON.parse(localStorage.getItem('fieldmax_cart') || '[]');
        
        // Check if product exists
        const existingIndex = cart.findIndex(item => item.id === productId);
        
        if (existingIndex > -1) {
          cart[existingIndex].quantity += 1;
          cart[existingIndex].subtotal = cart[existingIndex].quantity * cart[existingIndex].price;
        } else {
          cart.push({
            id: productId,
            name: productName,
            price: parseFloat(productPrice),
            quantity: 1,
            subtotal: parseFloat(productPrice)
          });
        }
        
        // Save to localStorage
        localStorage.setItem('fieldmax_cart', JSON.stringify(cart));
        
        // Show toast
        showToast(`‚úÖ ${productName} added to cart`);
        
        // Visual feedback
        const originalBg = this.style.background;
        const originalText = this.innerHTML;
        this.innerHTML = '<span class="btn-icon">‚úÖ</span><span class="btn-text">ADDED!</span>';
        this.style.background = 'linear-gradient(135deg, #10b981, #059669)';
        
        setTimeout(() => {
          this.innerHTML = originalText;
          this.style.background = originalBg;
        }, 2000);
        
        // Dispatch event for cart updates
        window.dispatchEvent(new CustomEvent('cartUpdated'));
      });
    });
  }

  function showToast(message) {
    const toast = document.getElementById('toast');
    const toastMessage = document.getElementById('toastMessage');
    
    if (toast && toastMessage) {
      toastMessage.textContent = message;
      toast.classList.add('show');
      
      setTimeout(() => {
        toast.classList.remove('show');
      }, 3000);
    }
  }
</script>

{% endblock %}